# 관광지벡터로 tsne 시각화
## 동적시각화


```python
import numpy as np
from scipy.spatial.distance import pdist, squareform
from sklearn.manifold import TSNE
from sklearn.decomposition import PCA
import matplotlib as mpl 
import matplotlib.pyplot as plt
from sklearn.cluster import KMeans
```


```python
import pandas as pd
from scipy import spatial
```

# BiGRU


```python
data=pd.read_csv('mean_vec_BiGRU.csv')
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.0, 0.47136718, 0.0, 0.75577825, 0.07479975,...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.08590033, 0.5533266, 0.0684339, 1.0938679, ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.0498387776, 0.516151488, 0.381910056, 0.0, ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.253292829, 0.0421581976, 0.00023451398, 0.0...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.115303725, 0.926335216, 0.486702025, 2.8103...</td>
    </tr>
  </tbody>
</table>
</div>




```python
import ast
dat=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```

# kmeans


```python
kmeans_clustering = KMeans(n_clusters = 7 )
idx = kmeans_clustering.fit_predict(dat)
data['category'] = idx
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
      <th>category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.0, 0.47136718, 0.0, 0.75577825, 0.07479975,...</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.08590033, 0.5533266, 0.0684339, 1.0938679, ...</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.0498387776, 0.516151488, 0.381910056, 0.0, ...</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.253292829, 0.0421581976, 0.00023451398, 0.0...</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.115303725, 0.926335216, 0.486702025, 2.8103...</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>




```python
X=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```


```python
len(X)
```




    349



# tsne


```python
from sklearn.manifold import TSNE

y = data['category'].to_list()

import os.path
import pickle

tsne = TSNE(n_components=2,random_state=42)
tsne_points = tsne.fit_transform(X)
tsne_df = pd.DataFrame(tsne_points, index=range(len(X)), columns=['x_coord', 'y_coord'])
tsne_df['plc'] = data['plc'].to_list()
tsne_df['cluster_no'] = y
```


```python
tsne_points
```




    array([[  7.2591953 ,  -6.5411205 ],
           [  7.3300686 ,  -6.5552764 ],
           [ 10.948658  ,   2.9025903 ],
           [ -0.12887055,  -7.9691505 ],
           [ -5.742126  ,  -3.278714  ],
           [ 14.625647  ,  -9.863003  ],
           [-14.568806  ,  -3.4399345 ],
           [ -6.2018394 ,   6.1123896 ],
           [  6.4899383 ,   7.0311804 ],
           [  8.478617  ,   4.2715826 ],
           [ 17.001553  ,  11.58067   ],
           [ 17.42045   ,  10.916832  ],
           [ -4.7283525 ,   1.6110065 ],
           [  6.229142  ,   5.672474  ],
           [ 11.855233  ,  10.389981  ],
           [ 11.540325  ,  10.599061  ],
           [  5.6392236 , -16.028252  ],
           [  2.8602135 ,  -6.127653  ],
           [  2.7729955 ,  -6.1661987 ],
           [  8.585237  ,  -3.7656906 ],
           [ -0.92386615,   2.6754785 ],
           [ 14.599608  ,   7.149871  ],
           [-12.727103  ,  -2.0055652 ],
           [ 14.226824  ,  -6.893112  ],
           [ -0.89473414,  -8.547889  ],
           [  7.6047397 ,  17.249163  ],
           [-13.385503  ,  -3.5422986 ],
           [  5.3797574 ,   8.371268  ],
           [  8.949328  ,   7.637802  ],
           [ 13.693902  ,  -8.904236  ],
           [ -2.5700178 , -10.606612  ],
           [  3.9048312 ,   4.089256  ],
           [-18.715181  ,  -4.3257375 ],
           [  8.713767  ,   6.5064683 ],
           [ 14.880694  ,   3.945024  ],
           [  7.1655345 ,  -1.7885549 ],
           [-16.786879  ,   1.8998832 ],
           [ -7.4250913 ,  -2.1266317 ],
           [  5.609338  ,   9.96564   ],
           [  6.007558  , -16.584621  ],
           [-11.989549  ,  -6.7595797 ],
           [ -5.5281444 ,   4.234757  ],
           [ -7.451096  , -11.546367  ],
           [ -6.1163397 ,   6.983505  ],
           [  5.4896007 ,   3.0855749 ],
           [ -9.007025  ,  -8.724951  ],
           [  7.2623034 , -16.46914   ],
           [ 11.664713  , -12.35424   ],
           [  5.356733  ,   3.8014114 ],
           [  9.456756  ,  13.881201  ],
           [ 11.109448  ,  13.562704  ],
           [-12.164246  ,   2.1681802 ],
           [ 15.934847  ,   9.005256  ],
           [  6.8797145 ,  -0.33965793],
           [ -1.1187558 ,   9.195747  ],
           [-14.623723  ,  -7.3185244 ],
           [ 13.787291  ,  12.381179  ],
           [ 13.108178  ,   6.8893595 ],
           [  6.101392  ,  -6.106648  ],
           [  1.5239942 ,  -3.1895876 ],
           [  1.4203155 ,  -3.343844  ],
           [ 11.760483  , -10.617965  ],
           [ -6.060264  ,  -6.1449423 ],
           [ -7.926743  ,   4.0962653 ],
           [-17.385326  ,   4.0030327 ],
           [ 11.9298525 ,  -9.05167   ],
           [ 13.7200365 , -10.022773  ],
           [ -9.002204  ,  -7.321218  ],
           [-11.30264   ,   6.246123  ],
           [ -3.5179305 , -10.760261  ],
           [-11.761619  ,  -6.8274574 ],
           [  7.4072294 ,   0.60904014],
           [  7.4992795 ,   0.4665152 ],
           [ -4.5944304 , -13.397158  ],
           [-12.841503  ,   0.57671845],
           [ -3.7300713 ,  -0.3770291 ],
           [-10.779222  ,  -3.6792657 ],
           [ 15.669124  ,  -7.050479  ],
           [  9.514928  ,   3.2120976 ],
           [ 11.516919  ,   1.487666  ],
           [ -3.0312886 , -12.570006  ],
           [ 12.659479  ,  -8.203124  ],
           [ 16.520748  ,  -8.950193  ],
           [-12.804916  ,  -2.7094498 ],
           [ 16.540356  , -10.466945  ],
           [ 11.059007  ,  -7.371922  ],
           [-12.865444  ,  -6.321466  ],
           [ 16.270334  ,   9.00148   ],
           [ -7.6123133 ,  -0.4903993 ],
           [  2.7892878 ,  -9.780229  ],
           [ -3.3252356 ,  13.942282  ],
           [ 13.328144  ,  -8.727727  ],
           [  6.0510764 , -17.438509  ],
           [ -4.067567  ,  -2.0048466 ],
           [ 11.630741  ,   0.7312365 ],
           [  9.802091  ,   4.0742974 ],
           [  4.8250885 ,   5.3155346 ],
           [ -3.1307468 ,  -9.448271  ],
           [-17.000856  ,  -1.9224625 ],
           [ -9.615855  ,  -1.2464362 ],
           [ 16.506792  ,  -9.395328  ],
           [ 16.702763  ,  -9.28525   ],
           [  8.575851  ,   2.7356706 ],
           [ -5.5528555 ,   1.6760584 ],
           [  8.572298  ,  11.00226   ],
           [  4.030099  , -16.211132  ],
           [ 16.881145  ,   7.5224085 ],
           [  6.2765713 ,   2.7287588 ],
           [ -1.5628583 ,   4.4891934 ],
           [ -1.5744879 ,   4.4857197 ],
           [ -3.9183095 ,  15.658924  ],
           [ -3.6721349 ,   3.1737537 ],
           [ -2.9531894 ,   0.6840526 ],
           [  6.066803  ,  -1.5700887 ],
           [  4.2792454 ,  -2.407078  ],
           [  4.264939  ,   0.13398713],
           [  3.6349442 ,  -1.094673  ],
           [  3.8766391 ,   0.50639653],
           [  0.39861563,   4.1275826 ],
           [-11.305784  ,  -1.1660162 ],
           [  7.8527703 ,   7.243039  ],
           [ -7.3452377 ,   6.0337977 ],
           [ 14.388713  , -11.181465  ],
           [  5.7903714 ,   0.1990392 ],
           [  1.5036505 ,   3.1460433 ],
           [ -8.073615  ,  -0.7571008 ],
           [  7.831343  ,   3.2443032 ],
           [ -8.474068  ,  -8.1491785 ],
           [ 10.852069  ,  -1.4388026 ],
           [ -5.725472  ,   2.892561  ],
           [ 19.469498  ,  -0.15585974],
           [ -8.920246  ,  -4.564331  ],
           [ -4.647301  ,   2.245035  ],
           [ -7.604806  ,   2.418218  ],
           [  1.8477647 ,   4.028613  ],
           [  4.7400546 ,   1.1601111 ],
           [  7.4322395 , -11.292845  ],
           [-11.812319  ,  -5.2091055 ],
           [  1.659452  ,   2.6890223 ],
           [  5.775984  ,   1.5861787 ],
           [  6.60684   , -15.747192  ],
           [ -2.2249053 ,  14.381845  ],
           [  4.7822537 ,   6.8398547 ],
           [  8.051771  ,  -3.3097785 ],
           [  9.439952  ,  -1.480962  ],
           [ -3.3901792 ,  -7.102215  ],
           [-11.893933  ,   7.6119986 ],
           [-12.3236065 ,   0.12764788],
           [ -4.169627  , -11.717919  ],
           [ 10.704975  ,   0.40271467],
           [-14.981706  ,   7.281285  ],
           [ 11.229517  ,   7.700243  ],
           [ 11.806668  ,   6.9664297 ],
           [-12.875201  ,  -8.901951  ],
           [ -0.26288617,  -2.0316248 ],
           [  8.853231  ,  12.904682  ],
           [-10.623591  , -13.394472  ],
           [ -8.73038   ,  -6.8332496 ],
           [  5.1527877 ,   2.4659443 ],
           [  6.504408  ,   4.499209  ],
           [  6.6922874 ,   4.955655  ],
           [  3.161373  ,   2.0122805 ],
           [  3.4985406 ,   2.9210188 ],
           [  2.7974653 ,  -9.804971  ],
           [  3.2653244 ,   6.07238   ],
           [ -1.8268714 ,  -0.26310053],
           [  6.507943  ,   1.6144669 ],
           [ 12.632216  ,   4.6425905 ],
           [  6.8102875 ,   3.5786324 ],
           [  5.90141   ,   1.0811765 ],
           [-11.215333  ,  -7.9781284 ],
           [ -9.459976  ,   1.3022885 ],
           [ 11.865683  , -12.326365  ],
           [ -0.7500684 ,  -8.032161  ],
           [-16.175364  ,  -1.383901  ],
           [ 12.889684  , -10.778965  ],
           [ -3.9716194 , -11.445158  ],
           [-13.29461   ,  -4.96646   ],
           [ 12.552686  ,  -6.7850547 ],
           [ -8.458937  ,  14.081504  ],
           [  4.696051  , -17.32993   ],
           [  8.379185  ,   5.6264987 ],
           [ 12.963483  ,   9.7606535 ],
           [ 13.343367  ,   9.217969  ],
           [  4.1677794 ,  -4.3959417 ],
           [ -3.9187207 ,  13.733612  ],
           [-11.872602  ,   7.4767394 ],
           [ -0.18079782,  -1.983862  ],
           [-11.780923  ,  -9.631538  ],
           [ -5.9728236 ,  -0.3232927 ],
           [ -0.06884625,   5.9190545 ],
           [  4.962127  ,  -8.092738  ],
           [ 15.194401  ,  -8.713378  ],
           [ -2.9786496 ,  -9.376221  ],
           [ -4.626526  ,  -8.044307  ],
           [ 16.42527   ,   2.0290873 ],
           [ 12.840109  ,  -0.91007644],
           [ 12.750715  ,  -9.524389  ],
           [ 11.879241  ,   5.2213483 ],
           [  1.8055806 ,   0.7548883 ],
           [ 15.146598  ,   5.698944  ],
           [  4.0677385 ,  -0.8741479 ],
           [  1.0361326 ,   1.4446849 ],
           [  8.834071  ,   1.4562192 ],
           [  9.153093  ,   0.7364144 ],
           [  8.542426  ,  -0.65335566],
           [  7.253329  ,   8.339874  ],
           [ 19.464678  ,  -0.14305268],
           [  0.5954688 ,  -2.515003  ],
           [  3.4798443 ,   4.660897  ],
           [  9.735593  ,  10.067737  ],
           [ 10.432404  ,   8.731717  ],
           [ -8.11067   ,   9.802074  ],
           [ 12.285422  ,   2.1157787 ],
           [ -3.5148466 ,  15.830065  ],
           [ -4.3190126 ,  -7.7571    ],
           [  8.458117  ,  -8.067345  ],
           [-17.872316  ,   1.6247131 ],
           [-18.216259  ,   1.5582788 ],
           [-18.122267  ,   1.2439023 ],
           [ 15.375077  ,  -0.26622728],
           [ 15.051066  ,   0.09492611],
           [ -9.211517  ,   0.10100721],
           [ -0.59518504,   1.0500946 ],
           [ -5.791034  ,   8.105457  ],
           [  4.548297  ,   2.2989514 ],
           [ -5.403191  ,   8.275071  ],
           [  4.7643404 , -16.235737  ],
           [-16.301176  ,  -8.21621   ],
           [ 13.797599  ,  -8.740278  ],
           [  0.76450354,  -0.8289564 ],
           [  5.641349  , -16.301825  ],
           [-15.436718  ,  -6.1647487 ],
           [ -7.564709  ,   3.251392  ],
           [ -1.7879994 ,   6.4957757 ],
           [-10.746921  ,  -3.6719968 ],
           [-10.140223  ,  -5.20666   ],
           [ -6.8321686 ,  -5.714328  ],
           [ -5.7117047 ,   7.247417  ],
           [-17.665995  ,   0.17562866],
           [-10.219096  ,  -1.8227574 ],
           [ -8.110843  ,   9.818806  ],
           [-13.706397  ,  -7.533443  ],
           [  9.290658  ,   0.5060681 ],
           [-10.677774  ,  -6.938372  ],
           [-12.40833   ,  -0.77148944],
           [-12.136837  ,   1.7466639 ],
           [ -5.2701864 ,  -1.0458307 ],
           [ -9.254701  ,  -4.60683   ],
           [ -6.175402  ,  -3.4294913 ],
           [-13.647541  ,  -7.0254016 ],
           [  4.407674  ,  12.857603  ],
           [  3.5406578 ,  13.287501  ],
           [  4.3443956 ,  11.256859  ],
           [  3.1130474 ,  12.36177   ],
           [  4.929565  ,  12.391696  ],
           [  3.5197017 ,  10.362789  ],
           [  6.414997  ,  10.878897  ],
           [  5.049014  ,  14.533256  ],
           [  4.1462665 ,  14.322762  ],
           [  4.6214595 ,  13.747353  ],
           [  5.5135155 ,  13.47246   ],
           [  4.7504916 ,  11.700998  ],
           [  5.0039415 ,  12.696534  ],
           [  6.779767  ,  15.508892  ],
           [-17.609247  ,  -5.1298156 ],
           [-17.569122  ,  -5.1010213 ],
           [ -5.684443  ,   2.2331655 ],
           [ 11.979926  ,  14.675455  ],
           [-15.059145  ,   0.0820209 ],
           [ -5.899312  ,  -7.067287  ],
           [-15.71806   ,  -1.2585464 ],
           [-13.924251  ,  -4.12093   ],
           [-11.7353735 ,  -2.4217043 ],
           [-13.241021  ,  -4.543061  ],
           [ -1.5582675 ,   7.9345636 ],
           [-15.536795  ,  -0.7300087 ],
           [-11.202352  ,   8.911062  ],
           [ 11.296905  ,   4.6913323 ],
           [ 13.381623  ,   4.203697  ],
           [ -0.33777264, -12.739534  ],
           [  2.5307739 ,   1.0470619 ],
           [ -0.3441466 , -12.741583  ],
           [  4.702735  ,  -1.4528948 ],
           [ -0.04420085,   7.725321  ],
           [ -0.2079927 ,   7.533778  ],
           [  1.069424  ,   8.836524  ],
           [  6.466255  ,  -3.5838149 ],
           [ 10.330197  ,  -4.2544866 ],
           [  4.8557353 , -14.15894   ],
           [ 10.3928585 ,   1.7902011 ],
           [ -4.0927796 ,  12.160792  ],
           [  3.5265265 ,  -6.08383   ],
           [  0.34785575,  -1.1842363 ],
           [  0.38439584,  -0.6062411 ],
           [ -2.4584453 ,  -2.2687068 ],
           [ 13.180789  ,  -3.075828  ],
           [-14.196113  ,   3.928023  ],
           [ -0.43432662,  -7.9528413 ],
           [  2.3656416 ,  -0.42587736],
           [  9.213448  ,   2.146819  ],
           [-14.660964  , -10.435021  ],
           [-12.070531  ,  -9.304387  ],
           [ 13.456277  , -11.739871  ],
           [  2.5447001 ,   7.8514986 ],
           [  0.40806067,   2.8630245 ],
           [  1.852135  ,   5.9203577 ],
           [  5.659228  , -16.797241  ],
           [-15.202817  ,  -5.0615435 ],
           [-14.485189  ,  -5.968142  ],
           [ 10.769751  ,  -4.1189194 ],
           [ 10.403363  ,   5.453228  ],
           [-16.481947  ,  -8.370026  ],
           [  7.5843515 ,  17.197853  ],
           [ 14.953665  ,   9.3910675 ],
           [  3.6392598 ,  -3.6924872 ],
           [ -8.883254  ,  -2.2129047 ],
           [ 12.092312  ,   6.049429  ],
           [  8.481887  ,   8.972083  ],
           [  7.641138  ,   8.34701   ],
           [  8.961093  ,   5.5655303 ],
           [ 12.732932  ,   9.8970175 ],
           [ -1.4014953 ,  -6.7292886 ],
           [ -2.8835232 ,  14.52028   ],
           [ -2.6105502 ,  14.711934  ],
           [ -2.6985538 ,  14.776609  ],
           [ -4.865606  ,   2.8312018 ],
           [ -6.5654364 ,   1.0323995 ],
           [ -8.911527  ,   0.45606902],
           [ 17.458647  ,   4.6368217 ],
           [ 16.603401  ,   4.912708  ],
           [  6.6699357 , -14.666851  ],
           [  7.4170938 , -11.261079  ],
           [ -3.9475923 ,  -4.4464316 ],
           [ -7.5709457 ,  -3.404799  ],
           [ 13.134183  ,   5.5901003 ],
           [ 19.521294  ,  -0.5982513 ],
           [-14.314804  ,  -8.8408375 ],
           [ -9.60833   ,   1.8515924 ],
           [  9.967719  ,   7.1379437 ],
           [  9.197796  ,   7.288886  ],
           [  6.962406  ,   2.555155  ],
           [ 14.230701  ,   5.198807  ],
           [ -2.2764559 ,  -4.200546  ],
           [  7.454351  ,   6.075188  ],
           [ -6.592197  ,  -0.19669588],
           [ -4.093236  ,   2.1335957 ],
           [ 13.930934  ,   2.171978  ],
           [ -6.245323  , -11.150666  ]], dtype=float32)




```python
tsne_df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x_coord</th>
      <th>y_coord</th>
      <th>plc</th>
      <th>cluster_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.259195</td>
      <td>-6.541121</td>
      <td>1100고지(휴게소)</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7.330069</td>
      <td>-6.555276</td>
      <td>1100고지습지</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10.948658</td>
      <td>2.902590</td>
      <td>가파도</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.128871</td>
      <td>-7.969151</td>
      <td>감귤박물관</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-5.742126</td>
      <td>-3.278714</td>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>344</th>
      <td>7.454351</td>
      <td>6.075188</td>
      <td>화순금모래해수욕장</td>
      <td>6</td>
    </tr>
    <tr>
      <th>345</th>
      <td>-6.592197</td>
      <td>-0.196696</td>
      <td>화조원</td>
      <td>1</td>
    </tr>
    <tr>
      <th>346</th>
      <td>-4.093236</td>
      <td>2.133596</td>
      <td>환상숲 곶자왈공원</td>
      <td>0</td>
    </tr>
    <tr>
      <th>347</th>
      <td>13.930934</td>
      <td>2.171978</td>
      <td>황우지해안</td>
      <td>6</td>
    </tr>
    <tr>
      <th>348</th>
      <td>-6.245323</td>
      <td>-11.150666</td>
      <td>휴애리 자연생활공원</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
<p>349 rows × 4 columns</p>
</div>




```python
from bokeh.plotting import figure, show, output_notebook
from bokeh.models import HoverTool, ColumnDataSource, value
from bokeh.palettes import brewer

output_notebook()
```



<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1001">Loading BokehJS ...</span>
</div>





```python
# Get the number of colors we'll need for the plot.
colors = brewer["Spectral"][len(tsne_df['cluster_no'].unique())]

# Create a map between factor and color.
colormap = {i: colors[i] for i in tsne_df['cluster_no'].unique()}

# Create a list of colors for each value that we will be looking at.
colors = [colormap[x] for x in tsne_df['cluster_no']]

tsne_df['color'] = colors
```


```python
plot_data = ColumnDataSource(
    data=tsne_df.to_dict(orient='list')
)
```


```python
# Plot 만들기(배경)
tsne_plot = figure(
    title='BiGRU',
    plot_width = 900,
    plot_height = 900,
    active_scroll='wheel_zoom',
    output_backend="webgl",
)
```


```python
# 해당 Hover 툴팁 만들기
tsne_plot.add_tools(
    HoverTool(
        tooltips='@plc'
    )
)
```


```python
tsne_plot.circle(
    source=plot_data,
    x='x_coord',
    y='y_coord',
    size=10,
    fill_color='color',
    line_color='color',
)
```




<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.renderers.GlyphRenderer">GlyphRenderer</b>(</div><div style="display: table-cell;">id&nbsp;=&nbsp;'1041', <span id="1044" style="cursor: pointer;">&hellip;)</span></div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data_source&nbsp;=&nbsp;ColumnDataSource(id='1002', ...),</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">glyph&nbsp;=&nbsp;Circle(id='1039', ...),</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">hover_glyph&nbsp;=&nbsp;None,</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks&nbsp;=&nbsp;{},</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks&nbsp;=&nbsp;{},</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">level&nbsp;=&nbsp;'glyph',</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted&nbsp;=&nbsp;False,</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted_glyph&nbsp;=&nbsp;None,</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name&nbsp;=&nbsp;None,</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">nonselection_glyph&nbsp;=&nbsp;Circle(id='1040', ...),</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_glyph&nbsp;=&nbsp;None,</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events&nbsp;=&nbsp;[],</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags&nbsp;=&nbsp;[],</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">view&nbsp;=&nbsp;CDSView(id='1042', ...),</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible&nbsp;=&nbsp;True,</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">x_range_name&nbsp;=&nbsp;'default',</div></div><div class="1043" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">y_range_name&nbsp;=&nbsp;'default')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1044");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1043");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script>





```python
# 각 값들 추가해주기 
tsne_plot.title.text_font_size = value('16pt')
# 짠!
show(tsne_plot)
```








<div class="bk-root" id="ac2492a3-75f4-4796-9bd6-f6449d24dd65" data-root-id="1003"></div>





# CNN_biLSTM.csv


```python
data=pd.read_csv('mean_vec_CNN_biLSTM.csv')
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.278717339, 0.0779750347, 0.00319957198, 1.3...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.976132751, 0.102955893, 0.0382773131, 0.493...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.26976639, 1.42603397, 0.0818317831, 0.49397...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.021647267, 1.93939412, 0.0160444956, 0.4561...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.443125606, 0.052063901, 0.421426475, 0.2537...</td>
    </tr>
  </tbody>
</table>
</div>




```python
import ast
dat=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```

# kmeans


```python
kmeans_clustering = KMeans(n_clusters = 7 )
idx = kmeans_clustering.fit_predict(dat)
data['category'] = idx
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
      <th>category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.278717339, 0.0779750347, 0.00319957198, 1.3...</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.976132751, 0.102955893, 0.0382773131, 0.493...</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.26976639, 1.42603397, 0.0818317831, 0.49397...</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.021647267, 1.93939412, 0.0160444956, 0.4561...</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.443125606, 0.052063901, 0.421426475, 0.2537...</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>




```python
X=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```


```python
len(X)
```




    349



# tsne


```python
from sklearn.manifold import TSNE

y = data['category'].to_list()

import os.path
import pickle

tsne = TSNE(n_components=2,random_state=42)
tsne_points = tsne.fit_transform(X)
tsne_df = pd.DataFrame(tsne_points, index=range(len(X)), columns=['x_coord', 'y_coord'])
tsne_df['plc'] = data['plc'].to_list()
tsne_df['cluster_no'] = y
```


```python
tsne_points
```




    array([[ -8.144753  , -12.023635  ],
           [ -7.752787  , -11.138684  ],
           [ -7.185633  ,  -3.5674005 ],
           [-13.310901  ,   8.586573  ],
           [  2.4745576 ,   5.156498  ],
           [  6.252395  , -17.34461   ],
           [ -5.4267807 ,  12.876355  ],
           [  6.5455084 ,   8.792127  ],
           [-10.368558  ,  -6.097681  ],
           [  5.7086287 ,  -1.0569667 ],
           [ -7.367183  ,  -6.947342  ],
           [  5.5935206 ,  -4.047107  ],
           [  3.3785098 ,   4.996503  ],
           [  7.4288025 ,   1.7599671 ],
           [  8.680311  ,   0.6975241 ],
           [  9.405136  ,   0.329279  ],
           [ 15.637285  ,  -5.7823043 ],
           [ -7.743509  ,   6.5245175 ],
           [ -7.748545  ,   6.5038276 ],
           [ -1.4020609 , -15.33065   ],
           [  9.383595  , -11.935928  ],
           [  4.270035  ,  -1.4100965 ],
           [ -4.2756786 ,  12.022246  ],
           [  4.572357  , -17.661362  ],
           [-14.001693  ,   6.422366  ],
           [-14.528932  ,  -6.4126444 ],
           [ -2.5929904 ,  13.754696  ],
           [  7.267051  ,   3.6179755 ],
           [ 11.0226    ,  -0.4557434 ],
           [  4.980181  , -18.020771  ],
           [  5.530984  ,  13.407976  ],
           [  2.300893  ,  -4.3017216 ],
           [ -7.999943  ,  11.811498  ],
           [  9.823342  ,  -1.6917838 ],
           [ -4.345593  , -14.988316  ],
           [ -4.287415  ,   7.9806914 ],
           [ -6.166737  ,  17.198965  ],
           [ -3.5515993 ,   9.276624  ],
           [  1.2197354 ,  -4.925993  ],
           [ 15.88282   ,  -5.9496484 ],
           [ -1.3227016 ,  13.805841  ],
           [ -7.40802   ,   2.7751694 ],
           [  5.170942  ,  15.989056  ],
           [  6.6573796 ,  10.789068  ],
           [  1.0779546 ,   0.52588487],
           [ -3.1667717 ,   6.180004  ],
           [ 16.447317  ,  -7.1269426 ],
           [  8.372205  , -19.058464  ],
           [ -1.3189912 ,  -6.4940767 ],
           [-10.938103  , -11.318577  ],
           [  1.2756687 , -14.483691  ],
           [ -4.070335  ,   0.5572757 ],
           [  6.2516    ,  -2.4026508 ],
           [ -3.7092988 ,  -5.3844156 ],
           [  8.12501   ,  10.960343  ],
           [  2.487616  ,  15.848657  ],
           [  2.4097078 , -14.944599  ],
           [ -0.5072014 ,  -1.0720708 ],
           [-11.667058  ,  -2.9933577 ],
           [  6.720832  ,  -7.4362726 ],
           [  6.9218936 ,  -7.607014  ],
           [  4.9243093 , -21.176222  ],
           [  0.90765244,   4.9915195 ],
           [  6.7934165 , -13.029218  ],
           [ -3.273989  ,  16.992882  ],
           [  5.066633  , -20.217356  ],
           [  6.4137335 , -18.717419  ],
           [ -1.8451812 ,  10.172394  ],
           [  6.7379737 ,  12.929799  ],
           [  6.162345  ,  12.785454  ],
           [ -1.4808795 ,  14.220566  ],
           [ -4.6778736 ,  -4.4633384 ],
           [ -3.2952688 ,  -4.6878767 ],
           [ -8.902707  ,   1.8186297 ],
           [ -2.388383  ,   5.8639135 ],
           [  0.31940037,   4.8863053 ],
           [  1.3120807 ,  12.996573  ],
           [  2.2684007 , -17.995193  ],
           [  0.12998138,  -2.5960264 ],
           [ -7.442925  ,  -5.0804935 ],
           [-13.462994  ,   5.444405  ],
           [  5.907991  , -16.478449  ],
           [  7.7061963 , -15.726217  ],
           [ -4.6861773 ,  12.39203   ],
           [  4.451039  , -16.800165  ],
           [  3.2749193 , -15.755098  ],
           [ -0.48131758,  13.099676  ],
           [  5.9536157 ,  -2.474742  ],
           [  2.3182147 ,   8.55231   ],
           [ -7.3821445 ,   9.886579  ],
           [ -9.500268  , -14.077619  ],
           [  5.147735  , -18.487469  ],
           [ 16.656918  ,  -6.1646705 ],
           [ -5.521247  ,   4.016956  ],
           [ -8.439721  ,  -2.7368891 ],
           [ -2.657539  ,  -2.2891152 ],
           [ 12.80747   ,   3.5188355 ],
           [-11.519098  ,   5.62389   ],
           [ -5.9028897 ,  14.066605  ],
           [  0.75700164,   9.002759  ],
           [  7.9490056 , -15.330001  ],
           [  8.042331  , -15.194841  ],
           [ -5.023425  ,  -4.418744  ],
           [  4.05893   ,   5.919037  ],
           [ -7.5461597 ,  -0.4083808 ],
           [ 16.310959  ,  -5.0664916 ],
           [  4.6600847 ,   0.21942587],
           [  1.2869569 ,  -2.3215356 ],
           [ -1.8429183 ,   2.4789383 ],
           [ -1.8418719 ,   2.4709678 ],
           [  7.0688324 , -17.076082  ],
           [  9.258142  , -14.991819  ],
           [  4.3797226 ,  -5.8191943 ],
           [ -1.7455863 ,  -7.816854  ],
           [ -0.08722241,  -5.3192935 ],
           [ -1.3155392 ,  -4.7768006 ],
           [  2.3931277 ,  -5.339511  ],
           [ -6.7942767 ,   0.92354023],
           [ -0.5946127 ,   7.3073316 ],
           [ -0.9931408 ,   8.932463  ],
           [ 10.905878  ,   1.1186378 ],
           [  5.9866033 ,  10.20086   ],
           [  6.855665  , -19.735376  ],
           [ -4.113394  ,  -7.127255  ],
           [ -0.3105894 ,  -0.39116544],
           [  2.0722604 ,   7.8581834 ],
           [  5.4031343 ,  -2.1950817 ],
           [  0.291851  ,  -8.9768    ],
           [ -4.1528616 ,  -2.7420464 ],
           [ 10.512955  , -14.21958   ],
           [-16.05617   ,  -4.6988616 ],
           [ -0.4150713 ,  11.45372   ],
           [  9.529467  , -13.586879  ],
           [  0.97374684,   8.351283  ],
           [ -1.2614236 ,  -1.3263355 ],
           [ -4.3475103 ,  -1.3497536 ],
           [-10.675558  ,  -9.605125  ],
           [ -1.7815167 ,  12.167863  ],
           [ -0.6328053 ,   0.09523419],
           [ -2.6182382 ,  -4.345038  ],
           [ 14.877929  ,  -7.3064303 ],
           [-10.466448  , -12.899213  ],
           [ -3.010862  ,  -1.0455375 ],
           [ -1.7913073 ,  -4.206164  ],
           [ -5.909703  ,  -3.2001266 ],
           [-12.228684  ,   0.79012764],
           [  3.7109709 ,  15.549765  ],
           [ -3.2011085 ,   7.8521833 ],
           [-11.557494  ,   0.55853033],
           [ -7.7230253 ,  -3.7521265 ],
           [-10.626349  ,   9.280469  ],
           [ 10.709374  ,  -3.195605  ],
           [ 10.386852  ,  -3.5576236 ],
           [  0.1062002 ,  16.333742  ],
           [  6.31376   ,  -9.470083  ],
           [  0.09471966,  -6.764512  ],
           [ -6.0080037 ,  20.205948  ],
           [  9.8366    ,  13.326711  ],
           [ -2.126493  ,  -5.8934193 ],
           [ -6.7424674 ,  -0.731801  ],
           [ -6.9087086 ,  -1.3250443 ],
           [ -0.93008876,  -5.789818  ],
           [  2.697005  ,  -5.4528093 ],
           [ -7.350262  ,   9.703875  ],
           [  7.099248  ,  -4.7220116 ],
           [ -0.97118765,   4.920737  ],
           [ -2.3637695 ,  -5.3469057 ],
           [  4.5941367 ,  -2.0234935 ],
           [ -6.4633985 ,  -6.3019032 ],
           [ -3.6155367 ,  -3.5984998 ],
           [ -1.9600053 ,  12.945156  ],
           [  6.0845437 ,   6.7612166 ],
           [  7.684712  , -19.036587  ],
           [-13.318703  ,   6.3842297 ],
           [ -5.757807  ,  16.212852  ],
           [  4.1743855 , -18.687265  ],
           [-11.309009  ,   1.7031943 ],
           [  2.2099721 ,  17.914398  ],
           [  7.7932816 ,  -9.147041  ],
           [  3.571009  , -20.240955  ],
           [ 14.743769  ,  -6.143626  ],
           [  8.838271  ,  -1.366637  ],
           [  7.221193  ,   0.12105002],
           [  6.5376925 ,  -0.3769499 ],
           [ -7.5390863 ,   8.910371  ],
           [ -8.914296  , -13.923634  ],
           [ -9.3948345 ,   0.7159547 ],
           [  6.1115217 ,  -9.340045  ],
           [  3.3483238 ,  12.394146  ],
           [  2.525011  ,   9.172195  ],
           [  8.507667  ,  10.324261  ],
           [ -1.8384252 ,  -8.429294  ],
           [  5.686079  , -19.180548  ],
           [-11.554077  ,   5.7494097 ],
           [-13.448563  ,   3.0499597 ],
           [  1.0117872 ,  -0.62158585],
           [  1.383269  ,  -6.5810776 ],
           [  5.964296  , -20.060015  ],
           [  2.1996174 ,  -1.3594747 ],
           [ -1.7085233 ,   4.467243  ],
           [ -9.750058  ,  -3.5366917 ],
           [  1.5406874 ,  -6.0365343 ],
           [ -0.6445584 ,   1.1487912 ],
           [ -5.874213  ,  -4.8263793 ],
           [ -6.341224  ,  -4.273234  ],
           [ -4.5194077 ,  -7.5869164 ],
           [ -8.774014  ,  -5.422632  ],
           [-16.189663  ,  -4.70725   ],
           [  7.132738  ,  -8.684952  ],
           [  2.3017788 ,  -9.57081   ],
           [ -4.453633  , -18.610994  ],
           [ -4.194133  , -18.616901  ],
           [  4.9114256 , -12.729651  ],
           [ -5.353001  ,  -2.2874677 ],
           [ -9.00601   , -13.349491  ],
           [-13.235024  ,   3.284183  ],
           [ 13.866998  ,  -9.7789135 ],
           [ -6.207218  ,  18.773056  ],
           [ -6.2293158 ,  18.991358  ],
           [ -6.5878944 ,  17.907776  ],
           [ 10.723789  ,   3.0780163 ],
           [ 10.557037  ,   2.650058  ],
           [  2.121081  ,   9.589929  ],
           [  3.2647579 ,   9.931799  ],
           [  1.4797173 , -12.01937   ],
           [ -2.472036  ,  -6.901494  ],
           [  1.3876867 , -12.052818  ],
           [  0.4131579 ,   6.567498  ],
           [  2.6137474 ,  16.288603  ],
           [  3.177628  , -17.149303  ],
           [  4.976502  ,  -7.8171024 ],
           [ 15.743157  ,  -6.2517776 ],
           [ -3.028452  ,  15.262699  ],
           [  4.652496  ,   8.916815  ],
           [ -3.7120626 ,   5.031475  ],
           [  1.3292044 ,  13.0309925 ],
           [ -1.2919204 ,  12.089186  ],
           [-10.445452  ,  12.640633  ],
           [ -4.5364    ,   2.12581   ],
           [ -7.35077   ,  17.3099    ],
           [  0.35544628,   9.214351  ],
           [  4.7932925 , -12.73448   ],
           [  0.5857989 ,  15.114653  ],
           [ -4.5634875 ,  -6.0746    ],
           [ -1.9354788 ,  10.196572  ],
           [ -4.450143  ,  10.397723  ],
           [ -2.808659  ,   7.811151  ],
           [ -1.9908698 ,  11.511049  ],
           [ -0.54590714,  11.537064  ],
           [  1.8077495 ,   6.175422  ],
           [ -0.10121156,  15.010681  ],
           [ -4.33223   , -11.068577  ],
           [ -1.8440228 , -11.71213   ],
           [ -2.0153565 , -10.760057  ],
           [ -2.2725332 , -12.045136  ],
           [ -3.5683405 , -11.122132  ],
           [  0.6392462 ,   2.046643  ],
           [ -1.7810557 , -13.781402  ],
           [ -4.654588  , -12.016748  ],
           [ -3.9397287 , -12.631005  ],
           [ -2.584349  , -12.130923  ],
           [ -4.222895  , -10.208361  ],
           [ -2.912951  , -11.142294  ],
           [ -2.7800055 , -10.888772  ],
           [ -3.6690764 , -12.765029  ],
           [ -8.121899  ,  13.224208  ],
           [ -8.219949  ,  13.09131   ],
           [  4.0870557 ,   5.995961  ],
           [ -4.8510747 ,   6.6798205 ],
           [ -5.2228947 ,  10.4879875 ],
           [-13.134266  ,   9.290168  ],
           [ -6.508122  ,  16.510183  ],
           [ -2.1322825 ,  14.717866  ],
           [ -7.4501133 ,  15.958134  ],
           [ -2.9574852 ,  14.222757  ],
           [  5.128133  ,  10.434787  ],
           [ -6.5470495 ,  16.146988  ],
           [ -9.417958  ,   0.41956112],
           [  3.4731333 ,  -2.3296127 ],
           [  2.9988246 ,  -0.36334458],
           [ -9.846605  ,   4.272256  ],
           [  1.1658685 ,  -3.6486702 ],
           [  2.2807634 ,  -9.516432  ],
           [  2.4481142 ,  -6.5598254 ],
           [  2.485759  ,   2.1538672 ],
           [  2.2056148 ,   1.53391   ],
           [  8.888128  ,  -4.1616983 ],
           [ -2.4512565 ,  -3.9279811 ],
           [ -1.2614    ,  -3.6706674 ],
           [-11.401739  ,  -0.42809615],
           [ -4.984262  ,  -3.7481682 ],
           [ -8.586524  , -14.595466  ],
           [ -7.977854  ,   5.543996  ],
           [  5.042846  ,  -8.051081  ],
           [  4.6528006 ,  -7.933585  ],
           [ -2.4080334 ,   0.61535186],
           [ -7.730034  ,  -9.624376  ],
           [-13.532248  ,   9.503879  ],
           [-13.047171  ,   6.754866  ],
           [  4.6543245 ,   2.3940551 ],
           [ -5.811308  ,  -5.3514495 ],
           [  7.207198  ,  15.118385  ],
           [  3.3999047 ,  12.583645  ],
           [  6.0462303 , -21.056002  ],
           [ -1.0152385 ,  -2.32082   ],
           [ -1.5857514 ,   7.386344  ],
           [  8.322212  ,   1.8947707 ],
           [ 15.625842  ,  -6.608626  ],
           [ -1.6587508 ,  16.206043  ],
           [ -0.7680931 ,  15.047275  ],
           [-10.771406  ,  -6.389576  ],
           [  4.072964  ,  -3.5911818 ],
           [  2.3506534 ,  17.628002  ],
           [-14.539309  ,  -6.385904  ],
           [  7.7231736 ,  -3.1000078 ],
           [ -0.22002055,  -4.154328  ],
           [ -2.4985132 ,   4.4948387 ],
           [  8.186864  ,  -3.0669515 ],
           [  9.015577  ,  -2.5766618 ],
           [ -9.504902  ,  -5.7989593 ],
           [  7.618975  ,  -1.4554096 ],
           [  7.578476  ,   0.30731568],
           [-12.30792   ,   4.7775683 ],
           [-10.39356   , -13.644164  ],
           [-10.756072  , -13.658796  ],
           [-10.725278  , -13.696043  ],
           [ 10.421106  , -13.454408  ],
           [  3.839317  ,   7.6758256 ],
           [  3.6505556 ,   8.154764  ],
           [ -6.163636  ,  -7.920123  ],
           [  4.288551  ,   0.09620891],
           [ 14.020796  ,  -4.763778  ],
           [ 11.81451   ,  -1.6691105 ],
           [  4.2795734 , -10.346531  ],
           [ -3.756402  ,  12.892784  ],
           [  2.6089509 ,  -1.5667926 ],
           [-15.935652  ,  -4.434454  ],
           [  0.82732946,  15.952048  ],
           [  5.854632  ,   7.1436014 ],
           [ 12.3943815 ,  -0.23466057],
           [ 11.325641  ,  -0.61272055],
           [  1.0516449 ,  -2.3248668 ],
           [  3.8444629 ,  -1.1246374 ],
           [ -1.811464  ,   8.266591  ],
           [  8.393593  ,  -1.4973291 ],
           [  1.8160905 ,  10.836549  ],
           [  4.055813  ,   4.6559443 ],
           [ -5.9924498 ,  -0.32725403],
           [  4.381867  ,  15.716125  ]], dtype=float32)




```python
tsne_df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x_coord</th>
      <th>y_coord</th>
      <th>plc</th>
      <th>cluster_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-8.144753</td>
      <td>-12.023635</td>
      <td>1100고지(휴게소)</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-7.752787</td>
      <td>-11.138684</td>
      <td>1100고지습지</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-7.185633</td>
      <td>-3.567400</td>
      <td>가파도</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-13.310901</td>
      <td>8.586573</td>
      <td>감귤박물관</td>
      <td>5</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2.474558</td>
      <td>5.156498</td>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>3</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>344</th>
      <td>8.393593</td>
      <td>-1.497329</td>
      <td>화순금모래해수욕장</td>
      <td>1</td>
    </tr>
    <tr>
      <th>345</th>
      <td>1.816090</td>
      <td>10.836549</td>
      <td>화조원</td>
      <td>2</td>
    </tr>
    <tr>
      <th>346</th>
      <td>4.055813</td>
      <td>4.655944</td>
      <td>환상숲 곶자왈공원</td>
      <td>4</td>
    </tr>
    <tr>
      <th>347</th>
      <td>-5.992450</td>
      <td>-0.327254</td>
      <td>황우지해안</td>
      <td>6</td>
    </tr>
    <tr>
      <th>348</th>
      <td>4.381867</td>
      <td>15.716125</td>
      <td>휴애리 자연생활공원</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
<p>349 rows × 4 columns</p>
</div>




```python
from bokeh.plotting import figure, show, output_notebook
from bokeh.models import HoverTool, ColumnDataSource, value
from bokeh.palettes import brewer

output_notebook()
```



<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1093">Loading BokehJS ...</span>
</div>





```python
# Get the number of colors we'll need for the plot.
colors = brewer["Spectral"][len(tsne_df['cluster_no'].unique())]

# Create a map between factor and color.
colormap = {i: colors[i] for i in tsne_df['cluster_no'].unique()}

# Create a list of colors for each value that we will be looking at.
colors = [colormap[x] for x in tsne_df['cluster_no']]

tsne_df['color'] = colors
```


```python
plot_data = ColumnDataSource(
    data=tsne_df.to_dict(orient='list')
)
```


```python
# Plot 만들기(배경)
tsne_plot = figure(
    title='CNN_biLSTM',
    plot_width = 900,
    plot_height = 900,
    active_scroll='wheel_zoom',
    output_backend="webgl",
)
```


```python
# 해당 Hover 툴팁 만들기
tsne_plot.add_tools(
    HoverTool(
        tooltips='@plc'
    )
)
```


```python
tsne_plot.circle(
    source=plot_data,
    x='x_coord',
    y='y_coord',
    size=10,
    fill_color='color',
    line_color='color',
)
```




<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.renderers.GlyphRenderer">GlyphRenderer</b>(</div><div style="display: table-cell;">id&nbsp;=&nbsp;'1133', <span id="1136" style="cursor: pointer;">&hellip;)</span></div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data_source&nbsp;=&nbsp;ColumnDataSource(id='1094', ...),</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">glyph&nbsp;=&nbsp;Circle(id='1131', ...),</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">hover_glyph&nbsp;=&nbsp;None,</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks&nbsp;=&nbsp;{},</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks&nbsp;=&nbsp;{},</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">level&nbsp;=&nbsp;'glyph',</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted&nbsp;=&nbsp;False,</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted_glyph&nbsp;=&nbsp;None,</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name&nbsp;=&nbsp;None,</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">nonselection_glyph&nbsp;=&nbsp;Circle(id='1132', ...),</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_glyph&nbsp;=&nbsp;None,</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events&nbsp;=&nbsp;[],</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags&nbsp;=&nbsp;[],</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">view&nbsp;=&nbsp;CDSView(id='1134', ...),</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible&nbsp;=&nbsp;True,</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">x_range_name&nbsp;=&nbsp;'default',</div></div><div class="1135" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">y_range_name&nbsp;=&nbsp;'default')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1136");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1135");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script>





```python
# 각 값들 추가해주기 
tsne_plot.title.text_font_size = value('16pt')
# 짠!
show(tsne_plot)
```








<div class="bk-root" id="ff412c29-6915-4dd8-b6ba-1203724e3c86" data-root-id="1095"></div>





# biLSTM.csv


```python
data=pd.read_csv('mean_vec_BiLSTM.csv')
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.0, 0.464537114, 0.0965782329, 0.956899107, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.50620675, 0.0, 1.0605601, 0.77088135, 0.0, ...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.0481949858, 0.581190646, 1.50552094, 0.4385...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.384193838, 0.140640646, 0.0, 0.229497015, 0...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[3.12251568, 0.295921564, 0.18568857, 0.181027...</td>
    </tr>
  </tbody>
</table>
</div>




```python
import ast
dat=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```

# kmeans


```python
kmeans_clustering = KMeans(n_clusters = 7 )
idx = kmeans_clustering.fit_predict(dat)
data['category'] = idx
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
      <th>category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.0, 0.464537114, 0.0965782329, 0.956899107, ...</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.50620675, 0.0, 1.0605601, 0.77088135, 0.0, ...</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.0481949858, 0.581190646, 1.50552094, 0.4385...</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.384193838, 0.140640646, 0.0, 0.229497015, 0...</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[3.12251568, 0.295921564, 0.18568857, 0.181027...</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>




```python
X=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```


```python
len(X)
```




    349



# tsne


```python
from sklearn.manifold import TSNE

y = data['category'].to_list()

import os.path
import pickle

tsne = TSNE(n_components=2,random_state=42)
tsne_points = tsne.fit_transform(X)
tsne_df = pd.DataFrame(tsne_points, index=range(len(X)), columns=['x_coord', 'y_coord'])
tsne_df['plc'] = data['plc'].to_list()
tsne_df['cluster_no'] = y
```


```python
tsne_points
```




    array([[ 1.62302744e+00, -1.63888130e+01],
           [ 1.64420235e+00, -1.62294216e+01],
           [-9.00194740e+00, -3.01628304e+00],
           [ 1.22392931e+01, -1.11213579e+01],
           [ 6.89852190e+00,  9.10033703e+00],
           [-7.17756987e+00,  1.25569448e+01],
           [ 1.20803623e+01,  6.50749922e+00],
           [ 5.36912346e+00, -2.49088478e+00],
           [-9.14780807e+00,  7.52944767e-01],
           [-5.72340441e+00, -5.29161501e+00],
           [-2.90322971e+00, -6.16463137e+00],
           [-1.00717554e+01, -8.10119915e+00],
           [ 8.75774479e+00, -5.18168306e+00],
           [-3.26463938e+00, -1.08782825e+01],
           [-9.36680317e+00, -1.21121578e+01],
           [-9.33007812e+00, -1.25820589e+01],
           [ 1.32363534e+00,  1.61422291e+01],
           [ 6.13322687e+00,  1.55206423e+01],
           [ 5.84286785e+00,  1.52898073e+01],
           [-1.70879574e+01, -1.19887314e+01],
           [-1.32741499e+01, -6.92515373e+00],
           [-1.04127655e+01, -7.08608437e+00],
           [ 1.15141325e+01,  7.13620377e+00],
           [-9.97961998e+00,  9.62775993e+00],
           [ 1.09828777e+01, -1.31090889e+01],
           [-1.96576214e+01, -3.14780533e-01],
           [ 1.37348566e+01,  5.53759003e+00],
           [-1.32992926e+01, -4.27097380e-01],
           [-6.86407948e+00, -1.02509747e+01],
           [-9.51396275e+00,  1.08718748e+01],
           [ 7.81863403e+00, -1.04120798e+01],
           [-3.96590900e+00,  1.74508065e-01],
           [ 1.81013756e+01,  1.05507460e+01],
           [-5.50999451e+00, -9.89768982e+00],
           [-1.06063204e+01, -5.58620739e+00],
           [ 1.43880453e+01, -5.77512360e+00],
           [ 3.82063007e+00,  9.02566147e+00],
           [ 1.05201092e+01,  3.33653617e+00],
           [-1.82509136e+00, -6.74151897e-01],
           [ 1.78871000e+00,  1.68944321e+01],
           [ 1.72686462e+01,  4.88600969e+00],
           [ 5.10749054e+00, -6.08072710e+00],
           [ 3.24080396e+00, -3.64077449e+00],
           [-2.82222939e+00, -1.37035453e+00],
           [-4.34399748e+00, -4.50431824e+00],
           [ 5.15904474e+00,  4.71817255e+00],
           [ 2.22007737e-01,  1.79994411e+01],
           [-2.01058817e+00,  1.53778000e+01],
           [-5.93086195e+00,  1.84526908e+00],
           [-9.92915630e+00,  7.27764416e+00],
           [-1.74424458e+01, -4.43621349e+00],
           [ 8.58557034e+00,  2.55803347e+00],
           [-1.32930784e+01, -1.05069857e+01],
           [-6.10280037e+00, -3.35258412e+00],
           [ 1.90488148e+00, -1.23984165e+01],
           [ 1.69658813e+01, -2.78770387e-01],
           [-8.19531059e+00,  4.38848162e+00],
           [-1.26496096e+01, -4.22676706e+00],
           [ 3.07677031e+00, -1.83642426e+01],
           [-2.31950969e-01,  7.97945118e+00],
           [-9.05054361e-02,  8.02006149e+00],
           [-1.09694920e+01,  1.53061552e+01],
           [ 1.59455042e+01, -8.38710690e+00],
           [ 9.78917980e+00, -4.08903837e+00],
           [-1.15106553e-01,  2.75408006e+00],
           [-1.14141645e+01,  9.67877865e+00],
           [-1.03643799e+01,  1.23152065e+01],
           [ 1.26723337e+01,  2.53278017e+00],
           [ 4.66833925e+00, -1.07958622e+01],
           [ 6.86749411e+00, -1.03553352e+01],
           [ 1.82710438e+01,  3.83414173e+00],
           [-7.82856750e+00, -1.22722220e+00],
           [-7.77944279e+00, -3.25298637e-01],
           [-2.87949860e-01, -1.89503074e+00],
           [ 6.57782221e+00,  3.48557401e+00],
           [ 8.41395187e+00,  8.68158245e+00],
           [ 8.02940464e+00,  5.60994864e+00],
           [-1.02073784e+01,  1.62621746e+01],
           [-6.73612165e+00, -2.27590919e+00],
           [-1.03931932e+01,  5.65407984e-03],
           [ 9.80108166e+00, -1.22006407e+01],
           [-7.81161594e+00,  1.33833361e+01],
           [-6.89878368e+00,  1.47032661e+01],
           [ 1.19689884e+01,  6.45210743e+00],
           [-9.77032375e+00,  1.43936529e+01],
           [-1.27849092e+01,  1.45058289e+01],
           [ 1.45159903e+01,  3.87374234e+00],
           [-1.32923813e+01, -1.03211384e+01],
           [ 8.68651104e+00, -3.33836496e-01],
           [ 8.36743832e+00,  1.24035892e+01],
           [ 1.39198208e+00, -1.93797150e+01],
           [-1.20149899e+01,  1.40155134e+01],
           [ 1.45251834e+00,  1.75537453e+01],
           [ 6.11655903e+00,  6.57516813e+00],
           [-1.19555035e+01,  1.24941492e+00],
           [-1.22655258e+01, -9.09807861e-01],
           [ 2.02532120e+01, -5.64586163e+00],
           [ 7.47298288e+00, -1.34927950e+01],
           [ 1.52970648e+01,  9.40830803e+00],
           [ 9.12040138e+00,  6.29848814e+00],
           [-8.09049606e+00,  1.43842859e+01],
           [-7.59969187e+00,  1.46261854e+01],
           [-7.98368502e+00, -2.04434085e+00],
           [ 7.93559313e+00, -5.08405447e+00],
           [-2.53669667e+00, -1.23687067e+01],
           [ 2.77074027e+00,  1.70020294e+01],
           [-8.34411430e+00, -5.33292007e+00],
           [-7.08180571e+00, -4.45252085e+00],
           [-5.84105730e+00,  5.00133562e+00],
           [-5.83073092e+00,  5.00665569e+00],
           [ 9.81484115e-01, -2.10944080e+01],
           [-6.27431488e+00,  1.60231819e+01],
           [-2.05430961e+00,  6.07368469e+00],
           [-7.99473000e+00,  9.43562889e+00],
           [-8.77016068e-01, -4.20576662e-01],
           [-2.90157509e+00, -1.34723175e+00],
           [-2.68550229e+00,  1.47133458e+00],
           [-1.42170131e+00, -4.17015648e+00],
           [-2.78371596e+00, -4.70295763e+00],
           [ 1.09673147e+01,  5.31248426e+00],
           [-3.68866181e+00, -8.96272659e+00],
           [ 6.93650246e+00, -2.86688042e+00],
           [-8.43466377e+00,  1.06297379e+01],
           [-7.03209496e+00, -1.10109031e+00],
           [-4.05940866e+00,  3.64112282e+00],
           [ 8.83164787e+00,  1.47672176e-01],
           [-7.14185524e+00, -3.54942584e+00],
           [ 1.26714449e+01,  2.39376664e+00],
           [-1.13030691e+01,  1.18586195e+00],
           [ 6.92971992e+00, -5.10038280e+00],
           [ 2.33673954e+00, -5.09261668e-01],
           [ 1.56975842e+01,  7.12910700e+00],
           [ 8.41691303e+00, -6.01884413e+00],
           [ 2.17673635e+00, -3.16946554e+00],
           [-1.10642262e+01, -3.82820511e+00],
           [-3.13201237e+00, -3.14987469e+00],
           [-9.25087452e+00,  6.69223690e+00],
           [ 1.25340872e+01,  4.14926958e+00],
           [-4.02807713e+00,  4.38381386e+00],
           [-4.66086912e+00, -2.42279887e+00],
           [ 1.58275992e-01,  1.64717712e+01],
           [-2.57400811e-01, -1.87700729e+01],
           [-3.94826913e+00, -3.40953803e+00],
           [-6.03938484e+00,  4.98544544e-01],
           [-9.38676834e+00,  2.30692959e+00],
           [ 1.46653404e+01, -7.57181358e+00],
           [ 1.75594940e+01, -8.05343807e-01],
           [ 9.38490582e+00,  3.76792383e+00],
           [ 5.94875813e+00, -1.01078520e+01],
           [-1.05289040e+01, -1.19101596e+00],
           [ 2.13998795e+01,  4.34147418e-02],
           [-5.48587942e+00, -1.16158781e+01],
           [-5.38366222e+00, -1.22366056e+01],
           [-1.47569942e+01,  7.52144766e+00],
           [-3.50317979e+00,  9.17557526e+00],
           [-4.33588028e+00,  6.86422539e+00],
           [ 1.02263813e+01,  1.56168804e+01],
           [ 2.12692394e+01,  4.49979067e+00],
           [-5.36580133e+00, -2.49761057e+00],
           [-4.83239031e+00, -7.29245234e+00],
           [-4.94475508e+00, -7.83925819e+00],
           [-3.84138465e+00,  2.62881446e+00],
           [-3.91997075e+00,  9.59353626e-01],
           [ 8.32495308e+00,  1.24282513e+01],
           [-5.88859272e+00,  3.52006507e+00],
           [-7.42027223e-01,  3.98519564e+00],
           [-5.13283110e+00, -3.81412077e+00],
           [-1.12107821e+01, -7.53187752e+00],
           [-4.34501171e+00, -5.81995821e+00],
           [-9.41195297e+00, -4.39744520e+00],
           [ 1.84119072e+01,  2.45547867e+00],
           [ 1.19791279e+01, -1.43790257e+00],
           [-3.10267520e+00,  1.52313452e+01],
           [ 1.07546749e+01, -1.16068764e+01],
           [ 1.35145578e+01,  9.63506317e+00],
           [-8.83413792e+00,  1.29120626e+01],
           [ 5.85783529e+00, -1.17070684e+01],
           [ 1.45162935e+01, -8.86392295e-01],
           [ 4.71008348e+00,  1.59195745e+00],
           [-9.35997009e+00,  1.18333616e+01],
           [ 4.58563417e-01,  1.54030876e+01],
           [-4.44222784e+00, -2.36889911e+00],
           [-1.04491606e+01, -1.08450041e+01],
           [-1.03124771e+01, -1.00684853e+01],
           [ 5.91392040e+00,  1.30748587e+01],
           [ 1.65194416e+00, -1.99878273e+01],
           [ 3.97378397e+00, -1.05773163e+01],
           [-3.10404706e+00,  8.60097885e+00],
           [-1.41390429e+01,  5.88355589e+00],
           [ 8.37085247e+00, -2.31864333e+00],
           [ 2.87515426e+00,  3.23713470e+00],
           [-1.76628456e+01,  9.36451244e+00],
           [-1.08303022e+01,  1.22032270e+01],
           [ 7.45833349e+00, -1.35915365e+01],
           [ 1.60708733e+01, -7.45103455e+00],
           [-1.39270697e+01, -4.77884054e+00],
           [-1.52142935e+01,  2.57144272e-01],
           [-1.16264887e+01,  1.17362566e+01],
           [-9.34789085e+00, -6.44613886e+00],
           [-1.54662359e+00,  3.00919533e+00],
           [-1.19234314e+01, -2.65228152e+00],
           [-2.18524194e+00,  1.57268763e+00],
           [-2.72743034e+00,  3.62479496e+00],
           [-8.89607525e+00, -7.39411473e-01],
           [-9.30828094e+00, -7.14016199e-01],
           [-5.02436781e+00, -1.03775108e+00],
           [-3.24618292e+00, -1.47968006e+01],
           [ 2.27771211e+00, -5.52937329e-01],
           [-1.78674984e+00,  8.33457661e+00],
           [ 3.66670012e+00, -6.19120169e+00],
           [-5.88746405e+00, -1.40190315e+01],
           [-5.74610519e+00, -1.31420164e+01],
           [ 6.11084700e+00, -5.64464450e-01],
           [-3.21337080e+00, -1.49028769e+01],
           [-4.25353378e-01, -2.06737976e+01],
           [ 1.49904423e+01, -7.78557205e+00],
           [-3.03204870e+00,  1.29094934e+01],
           [ 1.22973528e+01,  1.22915983e+01],
           [ 1.22045202e+01,  1.26650400e+01],
           [ 1.28001804e+01,  1.15089111e+01],
           [-1.54399264e+00, -8.09659004e+00],
           [-2.12414908e+00, -8.43112564e+00],
           [ 1.05504847e+01, -2.13299036e+00],
           [ 1.67296767e+00, -4.37271214e+00],
           [ 2.08586478e+00,  5.18068504e+00],
           [-1.83384824e+00, -2.48991060e+00],
           [ 2.16503000e+00,  5.48647404e+00],
           [ 2.04820824e+00,  1.52709484e+01],
           [ 1.56120586e+01, -2.02812219e+00],
           [-1.12012701e+01,  1.34954309e+01],
           [-3.07376409e+00,  7.07911539e+00],
           [ 1.63185787e+00,  1.62382507e+01],
           [ 1.39497166e+01,  8.07127833e-01],
           [ 4.60621452e+00, -3.19658494e+00],
           [ 1.39632165e+00, -7.05016136e+00],
           [ 8.11658001e+00,  5.63674259e+00],
           [ 1.30969048e+01,  4.30832911e+00],
           [ 1.68707066e+01, -7.83721399e+00],
           [ 2.23985863e+00,  3.77204490e+00],
           [ 1.38907223e+01,  1.12025213e+01],
           [ 9.93890190e+00,  6.48037481e+00],
           [ 6.08165455e+00, -5.43920934e-01],
           [ 1.60621109e+01,  4.42958593e+00],
           [-6.99190235e+00,  7.31902790e+00],
           [ 1.44225550e+01,  2.68730569e+00],
           [ 1.04157238e+01,  5.07598448e+00],
           [ 8.69560909e+00,  2.89367294e+00],
           [-1.39038944e+01,  4.84202671e+00],
           [ 1.52044563e+01,  6.88070154e+00],
           [ 7.39524412e+00,  8.85806847e+00],
           [ 1.56627026e+01,  3.62242603e+00],
           [-1.70445671e+01, -7.05428410e+00],
           [-1.67395058e+01, -8.31735706e+00],
           [-1.64744759e+01, -5.70514870e+00],
           [-1.95676270e+01, -6.01078176e+00],
           [-1.81911068e+01, -7.83738375e+00],
           [-5.79267931e+00, -1.80086350e+00],
           [-1.75687447e+01, -1.00379210e+01],
           [-1.91570072e+01, -8.48644257e+00],
           [-1.80475388e+01, -5.93878841e+00],
           [-1.87921886e+01, -6.98604441e+00],
           [-1.77794266e+01, -8.15116692e+00],
           [-1.69688530e+01, -6.75726080e+00],
           [-1.76832848e+01, -7.30618525e+00],
           [-1.59007521e+01, -7.49730968e+00],
           [ 1.88796520e+01,  7.93974113e+00],
           [ 1.88033104e+01,  8.00631905e+00],
           [ 7.29870033e+00, -4.81615353e+00],
           [ 6.73668909e+00,  2.65949154e+00],
           [ 1.14082270e+01,  9.09913540e+00],
           [ 1.50337839e+01, -9.50168610e+00],
           [ 1.34157753e+01,  9.82771778e+00],
           [ 1.50503693e+01,  4.79544544e+00],
           [ 1.00773516e+01,  8.12838840e+00],
           [ 1.31160679e+01,  5.36881495e+00],
           [-1.45450745e+01,  3.97406983e+00],
           [ 1.28968468e+01,  9.85573101e+00],
           [ 3.45113659e+00, -9.05866718e+00],
           [-6.65887260e+00, -6.55903292e+00],
           [-1.24171581e+01, -7.13078642e+00],
           [-9.22820377e+00, -1.88997974e+01],
           [-8.32110691e+00, -1.53700790e+01],
           [-9.23704624e+00, -1.88820972e+01],
           [-2.36352563e+00,  1.17422931e-01],
           [ 9.37018514e-01, -8.59664631e+00],
           [ 8.54385912e-01, -7.89028358e+00],
           [-6.79457128e-01, -1.04691954e+01],
           [-5.71645832e+00, -4.09641042e-02],
           [-1.00291939e+01,  5.05566788e+00],
           [-7.58337355e+00,  1.76353979e+00],
           [-9.05311203e+00, -1.59854460e+00],
           [-7.15377808e+00,  1.89224567e+01],
           [ 6.30116940e+00,  1.57038355e+01],
           [-3.15698695e+00,  7.68726063e+00],
           [-3.29004574e+00,  7.26554823e+00],
           [ 1.01218069e+00,  1.36517048e+00],
           [-6.32553196e+00,  8.57306385e+00],
           [ 1.43467569e+01, -1.05993347e+01],
           [ 1.14495316e+01, -1.12331486e+01],
           [-1.41391973e+01, -2.45645189e+00],
           [-1.01863642e+01, -2.33831334e+00],
           [-1.67850800e+01,  5.81871510e+00],
           [ 1.77761459e+01,  1.89044106e+00],
           [-1.17154675e+01,  1.28412676e+01],
           [-7.16691852e-01, -5.69008255e+00],
           [ 2.89660901e-01, -3.46410894e+00],
           [-7.69683218e+00, -1.21379747e+01],
           [ 1.11983657e+00,  1.67423058e+01],
           [ 1.59409513e+01,  1.34028256e+00],
           [ 1.59126101e+01,  1.54350746e+00],
           [-3.46562290e+00, -7.92303848e+00],
           [-7.08687353e+00, -8.64735794e+00],
           [ 1.55863752e+01, -1.78082860e+00],
           [-1.96418762e+01, -3.12794119e-01],
           [-1.34576483e+01, -1.19169865e+01],
           [-6.33032024e-01,  3.41015369e-01],
           [-1.26404638e+01,  4.69679165e+00],
           [-7.97739887e+00, -6.67407513e+00],
           [-1.07754052e+00, -1.07366381e+01],
           [-5.24283171e+00, -8.42133522e+00],
           [-5.96513748e+00, -6.70980549e+00],
           [-1.03133154e+01, -1.11179895e+01],
           [ 1.03159046e+01, -1.10823126e+01],
           [ 4.36538637e-01, -1.94911861e+01],
           [-2.25360207e-02, -1.94138718e+01],
           [ 2.10565142e-02, -1.96031399e+01],
           [ 9.40797043e+00, -6.15061188e+00],
           [ 7.93904591e+00, -3.71690249e+00],
           [ 1.04456692e+01, -1.53370357e+00],
           [-1.22538548e+01, -1.45119381e+01],
           [-1.20596428e+01, -8.21356201e+00],
           [-1.51635185e-01,  1.21329517e+01],
           [-3.79799455e-01,  1.15805244e+01],
           [ 1.12178516e+01, -3.54552436e+00],
           [ 1.30225735e+01,  7.39092398e+00],
           [-8.18403721e+00, -3.68866944e+00],
           [ 2.81961584e+00, -1.30566671e-01],
           [ 1.65870075e+01,  2.77095842e+00],
           [ 1.09969778e+01, -9.53932106e-01],
           [-7.98304462e+00, -1.00555210e+01],
           [-6.75687265e+00, -1.02105837e+01],
           [-6.66334963e+00, -4.50239801e+00],
           [-8.53399563e+00, -7.40465641e+00],
           [ 1.04790792e+01,  1.14752424e+00],
           [-4.66668987e+00, -1.01069613e+01],
           [ 8.76004410e+00, -1.99440110e+00],
           [ 8.55363178e+00, -6.50113773e+00],
           [-1.61063194e+01, -1.48148096e+00],
           [ 1.76707153e+01, -1.62991512e+00]], dtype=float32)




```python
tsne_df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x_coord</th>
      <th>y_coord</th>
      <th>plc</th>
      <th>cluster_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.623027</td>
      <td>-16.388813</td>
      <td>1100고지(휴게소)</td>
      <td>3</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1.644202</td>
      <td>-16.229422</td>
      <td>1100고지습지</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-9.001947</td>
      <td>-3.016283</td>
      <td>가파도</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>12.239293</td>
      <td>-11.121358</td>
      <td>감귤박물관</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6.898522</td>
      <td>9.100337</td>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>3</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>344</th>
      <td>-4.666690</td>
      <td>-10.106961</td>
      <td>화순금모래해수욕장</td>
      <td>2</td>
    </tr>
    <tr>
      <th>345</th>
      <td>8.760044</td>
      <td>-1.994401</td>
      <td>화조원</td>
      <td>6</td>
    </tr>
    <tr>
      <th>346</th>
      <td>8.553632</td>
      <td>-6.501138</td>
      <td>환상숲 곶자왈공원</td>
      <td>5</td>
    </tr>
    <tr>
      <th>347</th>
      <td>-16.106319</td>
      <td>-1.481481</td>
      <td>황우지해안</td>
      <td>2</td>
    </tr>
    <tr>
      <th>348</th>
      <td>17.670715</td>
      <td>-1.629915</td>
      <td>휴애리 자연생활공원</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>349 rows × 4 columns</p>
</div>




```python
from bokeh.plotting import figure, show, output_notebook
from bokeh.models import HoverTool, ColumnDataSource, value
from bokeh.palettes import brewer

output_notebook()
```



<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1193">Loading BokehJS ...</span>
</div>





```python
# Get the number of colors we'll need for the plot.
colors = brewer["Spectral"][len(tsne_df['cluster_no'].unique())]

# Create a map between factor and color.
colormap = {i: colors[i] for i in tsne_df['cluster_no'].unique()}

# Create a list of colors for each value that we will be looking at.
colors = [colormap[x] for x in tsne_df['cluster_no']]

tsne_df['color'] = colors
```


```python
plot_data = ColumnDataSource(
    data=tsne_df.to_dict(orient='list')
)
```


```python
# Plot 만들기(배경)
tsne_plot = figure(
    title='biLSTM',
    plot_width = 900,
    plot_height = 900,
    active_scroll='wheel_zoom',
    output_backend="webgl",
)
```


```python
# 해당 Hover 툴팁 만들기
tsne_plot.add_tools(
    HoverTool(
        tooltips='@plc'
    )
)
```


```python
tsne_plot.circle(
    source=plot_data,
    x='x_coord',
    y='y_coord',
    size=10,
    fill_color='color',
    line_color='color',
)
```




<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.renderers.GlyphRenderer">GlyphRenderer</b>(</div><div style="display: table-cell;">id&nbsp;=&nbsp;'1233', <span id="1236" style="cursor: pointer;">&hellip;)</span></div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data_source&nbsp;=&nbsp;ColumnDataSource(id='1194', ...),</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">glyph&nbsp;=&nbsp;Circle(id='1231', ...),</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">hover_glyph&nbsp;=&nbsp;None,</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks&nbsp;=&nbsp;{},</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks&nbsp;=&nbsp;{},</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">level&nbsp;=&nbsp;'glyph',</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted&nbsp;=&nbsp;False,</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted_glyph&nbsp;=&nbsp;None,</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name&nbsp;=&nbsp;None,</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">nonselection_glyph&nbsp;=&nbsp;Circle(id='1232', ...),</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_glyph&nbsp;=&nbsp;None,</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events&nbsp;=&nbsp;[],</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags&nbsp;=&nbsp;[],</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">view&nbsp;=&nbsp;CDSView(id='1234', ...),</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible&nbsp;=&nbsp;True,</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">x_range_name&nbsp;=&nbsp;'default',</div></div><div class="1235" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">y_range_name&nbsp;=&nbsp;'default')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1236");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1235");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script>





```python
# 각 값들 추가해주기 
tsne_plot.title.text_font_size = value('16pt')
# 짠!
show(tsne_plot)
```








<div class="bk-root" id="07e5e3be-788a-4471-9cbf-2e7d11f03abb" data-root-id="1195"></div>





# RNN_biLSTM.csv


```python
data=pd.read_csv('mean_vec_RNN_biLSTM.csv')
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.393968523, 0.0118618663, 0.0, 0.346907854, ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.502727628, 0.0971593931, 0.0664539039, 0.02...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[1.56821334, 0.518178463, 0.0982425958, 0.3014...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.112996824, 0.153599545, 1.30707169, 0.01999...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.171564266, 0.0281053875, 0.550108254, 0.791...</td>
    </tr>
  </tbody>
</table>
</div>




```python
import ast
dat=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```

# kmeans


```python
kmeans_clustering = KMeans(n_clusters = 7 )
idx = kmeans_clustering.fit_predict(dat)
data['category'] = idx
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
      <th>category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.393968523, 0.0118618663, 0.0, 0.346907854, ...</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.502727628, 0.0971593931, 0.0664539039, 0.02...</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[1.56821334, 0.518178463, 0.0982425958, 0.3014...</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.112996824, 0.153599545, 1.30707169, 0.01999...</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.171564266, 0.0281053875, 0.550108254, 0.791...</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>




```python
X=data['mean_vec'].apply(lambda x:ast.literal_eval(x)).tolist()
```


```python
len(X)
```




    349



# tsne


```python
from sklearn.manifold import TSNE

y = data['category'].to_list()

import os.path
import pickle

tsne = TSNE(n_components=2,random_state=42)
tsne_points = tsne.fit_transform(X)
tsne_df = pd.DataFrame(tsne_points, index=range(len(X)), columns=['x_coord', 'y_coord'])
tsne_df['plc'] = data['plc'].to_list()
tsne_df['cluster_no'] = y
```


```python
tsne_points
```




    array([[ 4.01371717e+00,  1.19931002e+01],
           [ 2.84142971e+00,  1.22334213e+01],
           [-7.78442717e+00,  4.03062773e+00],
           [ 3.30845571e+00, -8.08794403e+00],
           [ 7.46786642e+00,  1.33309011e+01],
           [ 9.72112370e+00,  1.25770521e+01],
           [ 8.28288198e-01, -1.55227509e+01],
           [ 8.74352264e+00, -3.85463691e+00],
           [-1.32278185e+01,  6.66577482e+00],
           [-8.82628155e+00,  7.49730682e+00],
           [-7.05877066e-01,  6.55697918e+00],
           [-1.37527809e-01,  7.54216194e+00],
           [ 1.28778763e+01,  1.68272424e+00],
           [-9.34444427e+00, -5.64134538e-01],
           [-1.43047876e+01,  1.20984602e+01],
           [-1.54848757e+01,  1.01345005e+01],
           [ 2.10758724e+01,  8.46291828e+00],
           [ 5.70346880e+00,  5.00715542e+00],
           [ 5.66984177e+00,  5.15084457e+00],
           [-7.79020691e+00,  9.56887913e+00],
           [ 2.27774334e+00, -2.41243792e+00],
           [-8.46601295e+00,  5.38024426e+00],
           [ 1.89386773e+00, -1.59844513e+01],
           [ 6.53267717e+00,  1.45992146e+01],
           [ 5.00783968e+00, -4.34336233e+00],
           [-1.55402479e+01,  3.24715853e+00],
           [ 8.34525406e-01, -1.43771439e+01],
           [-6.39964104e+00, -2.58469605e+00],
           [-1.44557238e+01,  1.12067852e+01],
           [ 9.30459976e+00,  1.58177519e+01],
           [ 6.19895554e+00, -2.08898568e+00],
           [-1.21015871e+00,  9.57026291e+00],
           [ 3.69848633e+00, -1.77720318e+01],
           [-1.33095398e+01,  8.86621284e+00],
           [-8.16001987e+00,  1.19040051e+01],
           [-3.32001042e+00, -5.58621120e+00],
           [ 5.56246090e+00, -1.36237478e+01],
           [ 4.96434641e+00, -1.04955521e+01],
           [-3.79199362e+00,  9.82007694e+00],
           [ 2.12750397e+01,  8.22243404e+00],
           [-1.32850778e+00, -1.31973696e+01],
           [ 1.08663301e+01, -6.17747021e+00],
           [-7.73061275e+00, -1.09927473e+01],
           [ 8.37061119e+00, -2.93631911e+00],
           [-4.72520971e+00,  6.47692823e+00],
           [-4.70823479e+00, -3.06970596e+00],
           [ 2.03585377e+01,  8.79810619e+00],
           [ 9.72081184e+00,  1.65373993e+01],
           [-3.03705502e+00,  4.28132629e+00],
           [ 5.13336515e+00,  1.45868816e+01],
           [-2.37815523e+00,  1.21657848e+01],
           [ 1.95996368e+00,  1.64146078e+00],
           [-1.04765272e+01,  1.37126551e+01],
           [-8.24381542e+00, -5.78695250e+00],
           [ 7.31909943e+00, -6.68749285e+00],
           [-1.23325396e+00, -1.16521473e+01],
           [-2.49977160e+00,  1.15693579e+01],
           [-1.13611374e+01,  1.93706393e+00],
           [ 7.40213394e+00, -6.21512271e-02],
           [ 1.66445942e+01, -4.46386844e-01],
           [ 1.76694679e+01, -1.14889932e+00],
           [ 1.15486727e+01,  1.78109913e+01],
           [ 5.88181734e+00, -7.07442379e+00],
           [ 1.28248968e+01, -2.03662252e+00],
           [-3.72722864e+00, -1.41760898e+00],
           [ 6.43112659e+00,  1.54149055e+01],
           [ 1.11291552e+01,  1.61899185e+01],
           [-3.40301442e+00, -8.15355301e+00],
           [-2.29881883e+00, -7.46464968e+00],
           [ 5.50672150e+00, -1.64028561e+00],
           [-2.48135257e+00, -1.08712978e+01],
           [-5.47180557e+00,  3.60797262e+00],
           [-4.40858746e+00,  3.75649667e+00],
           [-4.54318374e-01, -2.64727807e+00],
           [-9.78492737e-01, -5.85384083e+00],
           [-1.98930192e+00, -2.38178563e+00],
           [ 1.19448178e-01, -1.00655212e+01],
           [ 1.24642124e+01,  1.55776939e+01],
           [-6.09094095e+00,  2.68557310e+00],
           [-1.30339661e+01,  3.58050132e+00],
           [ 4.09215927e+00, -3.62902451e+00],
           [ 1.07119637e+01,  1.41107740e+01],
           [ 9.05797386e+00,  1.23795223e+01],
           [ 1.74266779e+00, -1.60598049e+01],
           [ 1.10466537e+01,  1.50343075e+01],
           [ 1.12479820e+01,  1.26881084e+01],
           [-1.64247051e-01, -1.29408579e+01],
           [-1.75881851e+00,  4.33938885e+00],
           [ 6.49969530e+00, -1.05849981e+01],
           [ 8.39454651e+00, -1.46896057e+01],
           [ 4.65714693e+00,  1.15815620e+01],
           [ 1.06393089e+01,  1.68812160e+01],
           [ 2.19331436e+01,  7.93669939e+00],
           [-6.18543577e+00, -9.93282127e+00],
           [-1.18100576e+01,  4.59885931e+00],
           [-4.72177935e+00,  2.61828780e+00],
           [-4.70206738e+00,  1.27434063e+00],
           [ 5.83279800e+00, -3.48202848e+00],
           [ 3.77582383e+00, -1.50030260e+01],
           [ 4.03015995e+00, -1.23451748e+01],
           [ 1.13792896e+01,  1.39097786e+01],
           [ 1.23961468e+01,  4.24748516e+00],
           [-1.12416391e+01,  3.62141109e+00],
           [ 1.19629421e+01,  1.74879932e+00],
           [-1.00898952e+01, -1.84382963e+00],
           [ 2.18306999e+01,  9.12453747e+00],
           [-1.17925024e+01,  1.20147247e+01],
           [-5.25802231e+00,  8.95395279e+00],
           [ 1.94090950e+00,  5.85225296e+00],
           [ 2.03393865e+00,  5.85002995e+00],
           [ 8.83386612e+00,  1.44982433e+01],
           [ 1.39523115e+01,  2.99802661e+00],
           [ 1.24357331e+00, -2.08749080e+00],
           [ 7.52818823e+00,  1.07116890e+01],
           [ 7.27297068e-01,  1.00200224e+01],
           [-2.48697305e+00,  5.31826591e+00],
           [-1.31096792e+00,  9.11382103e+00],
           [ 8.73286188e-01, -2.81261706e+00],
           [-8.07356644e+00, -3.56431746e+00],
           [ 7.14699864e-01, -7.36798763e+00],
           [-1.35643864e+01,  1.06337681e+01],
           [ 8.36284542e+00, -2.42754483e+00],
           [ 1.19545183e+01,  1.68673763e+01],
           [-8.00571537e+00,  1.76584768e+00],
           [-2.49165821e+00,  2.82468009e+00],
           [ 6.71928120e+00, -1.05670872e+01],
           [-6.21338177e+00,  3.65759706e+00],
           [-2.92898035e+00, -8.98773003e+00],
           [-1.02428007e+01,  2.97300482e+00],
           [ 1.18359413e+01,  2.51165819e+00],
           [-1.57374735e+01,  2.11145449e+00],
           [ 2.20045185e+00, -1.24419212e+01],
           [ 1.32919874e+01,  2.26661897e+00],
           [ 1.08385096e+01, -8.67118835e+00],
           [-3.21642470e+00,  2.84326911e+00],
           [-4.77643776e+00,  4.60577345e+00],
           [-1.70415154e+01,  1.12908850e+01],
           [-1.75885272e+00, -1.04558449e+01],
           [ 6.54590189e-01,  2.99409771e+00],
           [-3.63557720e+00,  4.72763491e+00],
           [ 2.04776897e+01,  9.56116390e+00],
           [ 4.42565489e+00,  9.62891579e+00],
           [-3.98642159e+00,  5.64535809e+00],
           [-2.19562030e+00,  6.36515427e+00],
           [-7.63675499e+00,  8.85096931e+00],
           [ 3.56268644e+00, -1.07750393e-01],
           [-4.17600346e+00, -7.32974386e+00],
           [-1.10031739e-01, -6.27498865e+00],
           [ 3.88462567e+00, -7.30805516e-01],
           [-9.07122517e+00,  4.37536764e+00],
           [-4.38304472e+00, -1.46649866e+01],
           [-1.39834023e+01,  1.53438759e+01],
           [-5.06215334e+00, -9.56279516e-01],
           [-3.38571548e+00, -1.35249157e+01],
           [ 1.72081051e+01, -2.23882151e+00],
           [-3.76842499e+00,  8.46749020e+00],
           [-1.44654787e+00, -5.64768696e+00],
           [-3.13920236e+00, -3.72789454e+00],
           [-3.34820366e+00,  1.15626545e+01],
           [-1.00419922e+01,  6.82659912e+00],
           [-1.13078136e+01,  7.90955639e+00],
           [-2.10251808e+00,  5.34235859e+00],
           [-2.20163250e+00,  9.00146103e+00],
           [ 8.61425686e+00, -1.46569176e+01],
           [-1.00622308e+00,  2.71424556e+00],
           [-3.41051245e+00, -2.81190610e+00],
           [-9.28503227e+00,  8.54828644e+00],
           [-9.93300724e+00,  1.29063902e+01],
           [-6.01764202e+00,  5.94486189e+00],
           [-5.28351688e+00,  5.42173147e+00],
           [-3.01702189e+00, -1.08824711e+01],
           [ 8.98249054e+00, -1.03111162e+01],
           [ 1.06229706e+01,  1.75471611e+01],
           [ 5.03294134e+00, -3.82915807e+00],
           [ 1.95291626e+00, -1.42881470e+01],
           [ 1.02731037e+01,  1.59015350e+01],
           [ 4.25848436e+00, -1.18888998e+00],
           [-6.80651760e+00, -1.35490456e+01],
           [ 1.65649319e+01, -8.37963104e-01],
           [ 1.18462582e+01,  1.47988558e+01],
           [ 2.14425297e+01,  7.25208426e+00],
           [-1.09832230e+01,  9.94306374e+00],
           [-1.18130455e+01,  1.32763700e+01],
           [-1.06276999e+01,  1.28657436e+01],
           [ 4.99240589e+00,  3.32083869e+00],
           [ 5.63692713e+00,  1.21648445e+01],
           [-6.65122032e+00, -6.60349512e+00],
           [ 1.72553310e+01, -2.78963304e+00],
           [-4.29048252e+00, -9.89266872e+00],
           [ 9.89498615e+00, -6.42228222e+00],
           [ 7.81623983e+00, -7.40998077e+00],
           [ 7.43021250e+00,  9.18031120e+00],
           [ 9.28825378e+00,  1.75488396e+01],
           [ 6.12502003e+00, -3.40953064e+00],
           [ 5.85233736e+00, -5.59450054e+00],
           [-9.64583683e+00,  1.29056752e+00],
           [-2.93701720e+00,  7.53467989e+00],
           [ 1.11981945e+01,  1.69851341e+01],
           [-9.55836105e+00,  1.22845373e+01],
           [-3.94187117e+00, -2.80485916e+00],
           [-9.29684544e+00,  1.06967020e+01],
           [-2.93485761e+00,  7.71555805e+00],
           [-4.13754582e-01,  1.00090992e+00],
           [-1.10409088e+01,  4.23176003e+00],
           [-7.62015820e+00,  2.94684386e+00],
           [-1.25345840e+01, -4.29804623e-02],
           [-1.28877125e+01,  9.04965591e+00],
           [-1.58029737e+01,  1.86727297e+00],
           [ 1.79163818e+01, -1.79728889e+00],
           [ 8.26012230e+00, -9.09179568e-01],
           [-1.46428213e+01,  1.53179598e+01],
           [-1.41470566e+01,  1.53285198e+01],
           [ 1.15454912e+01, -3.01399231e+00],
           [-1.23302765e+01,  2.68328714e+00],
           [ 8.51820278e+00,  1.47829542e+01],
           [ 3.89318681e+00, -5.91401577e+00],
           [ 8.73720837e+00,  5.60177517e+00],
           [ 5.38389826e+00, -1.53082485e+01],
           [ 5.94379091e+00, -1.46051369e+01],
           [ 4.44551849e+00, -1.56176481e+01],
           [-1.02049932e+01,  2.46467566e+00],
           [-1.36870651e+01,  6.30599856e-01],
           [ 1.09160566e+01, -8.42039108e+00],
           [ 1.10291700e+01, -9.65446091e+00],
           [ 9.62334538e+00, -2.38926148e+00],
           [ 8.45154572e+00,  1.11736479e+01],
           [ 1.08281908e+01, -2.40294838e+00],
           [ 2.08676319e+01,  7.10390520e+00],
           [-6.27448177e+00, -1.12992077e+01],
           [ 1.04495029e+01,  1.38863821e+01],
           [ 1.62885895e+01, -2.21610212e+00],
           [ 2.07883720e+01,  8.05543041e+00],
           [-2.58151507e+00, -1.40608234e+01],
           [ 1.02525616e+01, -7.99572897e+00],
           [-2.59784365e+00, -1.74577065e+01],
           [ 7.35837147e-02, -1.01011648e+01],
           [-2.12808800e+00, -1.19457808e+01],
           [ 7.20352221e+00, -7.40757275e+00],
           [ 8.98818493e+00, -2.69227505e+00],
           [ 4.77646065e+00, -1.64460964e+01],
           [ 3.13420367e+00, -1.30750542e+01],
           [ 1.15000267e+01, -2.98828244e+00],
           [-5.16301203e+00, -1.18170204e+01],
           [-7.31177902e+00, -4.60994452e-01],
           [-3.45821381e+00, -9.78094482e+00],
           [ 5.03172338e-01, -7.09136724e+00],
           [ 8.63400996e-01,  2.56805968e+00],
           [-4.87333965e+00, -4.52037096e+00],
           [ 1.62960684e+00, -1.17527542e+01],
           [ 2.81088829e+00, -1.16938143e+01],
           [-3.61743283e+00, -1.19159155e+01],
           [-3.24137497e+00,  1.46980190e+01],
           [-5.01982355e+00,  1.32917633e+01],
           [-2.42109108e+00,  1.60255165e+01],
           [-6.18660116e+00,  1.42052021e+01],
           [-3.38769794e+00,  1.55655527e+01],
           [-6.19163227e+00,  8.79154623e-01],
           [-4.54690599e+00,  1.69650841e+01],
           [-2.62421346e+00,  1.69895859e+01],
           [-4.93770552e+00,  1.56906490e+01],
           [-4.45884609e+00,  1.29867029e+01],
           [-3.33095813e+00,  1.38490171e+01],
           [-3.55280352e+00,  1.59495544e+01],
           [-3.03431869e+00,  1.63206844e+01],
           [-2.39954329e+00,  1.44416666e+01],
           [-9.15099263e-01, -1.59927864e+01],
           [-1.81468117e+00, -1.29993124e+01],
           [ 1.23305769e+01,  1.76820076e+00],
           [ 4.91890955e+00, -7.11437321e+00],
           [ 4.03515863e+00, -1.41545448e+01],
           [ 3.72198081e+00, -6.93903875e+00],
           [ 3.15971088e+00, -1.53704977e+01],
           [-1.73638153e+00, -1.48346462e+01],
           [ 8.80114675e-01, -1.67047291e+01],
           [-1.23682976e+00, -1.42884340e+01],
           [ 1.45016441e+01, -3.46675777e+00],
           [ 3.36578155e+00, -1.60174866e+01],
           [-6.57175684e+00, -6.65420866e+00],
           [-6.19856644e+00,  1.20230770e+01],
           [-9.78183270e+00,  1.41788292e+01],
           [ 1.09590130e+01, -5.50169802e+00],
           [-6.82108927e+00,  1.71798944e+00],
           [-5.00132799e+00,  1.16744099e+01],
           [-3.07847667e+00,  8.45689774e+00],
           [ 1.53990030e+01, -4.58271885e+00],
           [-9.65965867e-01,  9.70836356e-02],
           [-1.43153524e+01,  8.33942795e+00],
           [-1.27844548e+00,  5.41204405e+00],
           [ 5.76680231e+00,  1.47823620e+01],
           [ 1.83551776e+00, -2.13741511e-01],
           [-1.17550993e+01,  3.38220716e+00],
           [-1.25064135e+01, -4.71100140e+00],
           [ 8.89415836e+00,  3.87545443e+00],
           [ 1.67429314e+01, -2.54106879e+00],
           [ 1.59953012e+01, -2.50390005e+00],
           [-5.47860026e-01, -4.10815525e+00],
           [ 4.97610426e+00,  9.56358671e-01],
           [ 3.16813207e+00, -8.39780903e+00],
           [ 3.43897820e+00, -5.17585659e+00],
           [-4.19478238e-01,  4.26991034e+00],
           [-1.07512951e+01,  5.09558821e+00],
           [ 1.35021791e+01, -3.24791956e+00],
           [-4.92065382e+00, -1.28923368e+01],
           [ 9.81611633e+00,  1.47502842e+01],
           [-2.98796058e+00,  1.23959124e+00],
           [-1.41584873e+00,  2.02830553e+00],
           [-1.94757378e+00, -2.17404440e-02],
           [ 2.04746971e+01,  7.71229744e+00],
           [-1.98524630e+00, -1.54618912e+01],
           [-2.13414335e+00, -1.34551182e+01],
           [-1.30388985e+01,  5.25045967e+00],
           [-1.54723511e+01,  7.04276228e+00],
           [-6.78263283e+00, -1.33041382e+01],
           [-1.54760771e+01,  3.00155330e+00],
           [-1.12945108e+01,  1.50804977e+01],
           [ 7.73308337e-01,  5.50064087e+00],
           [-4.79931450e+00, -8.84875011e+00],
           [-1.04756508e+01,  1.12698269e+01],
           [-1.25749197e+01,  8.41665459e+00],
           [-1.36654100e+01,  8.06279087e+00],
           [-9.66874981e+00,  7.91789389e+00],
           [-1.29592285e+01,  1.31837988e+01],
           [ 3.48282792e-02, -3.89630508e+00],
           [ 4.42012262e+00,  1.04322081e+01],
           [ 4.35132742e+00,  1.01041126e+01],
           [ 4.36633587e+00,  1.01696081e+01],
           [ 1.33263407e+01,  1.06860650e+00],
           [ 1.19713354e+01,  1.29344061e-01],
           [ 9.15929508e+00, -9.39838219e+00],
           [-8.79091740e+00,  3.19582939e+00],
           [-8.80643845e+00,  1.25431080e+01],
           [ 1.88232956e+01,  7.89741564e+00],
           [-1.53221159e+01,  1.08938789e+01],
           [ 6.77126074e+00,  3.24207902e+00],
           [ 1.87503743e+00, -1.51909313e+01],
           [-6.68153238e+00,  4.52157450e+00],
           [-1.50274334e+01,  1.76563048e+00],
           [-5.72315454e+00, -1.26603165e+01],
           [ 1.22237349e+01, -9.06981087e+00],
           [-1.58759584e+01,  1.18989954e+01],
           [-1.48134184e+01,  1.05967274e+01],
           [-6.55796242e+00,  8.43565083e+00],
           [-8.75985432e+00,  1.30147352e+01],
           [ 6.26305401e-01, -5.72471666e+00],
           [-7.56361675e+00,  6.47089720e+00],
           [-5.17863274e+00, -1.66650944e+01],
           [ 1.39430933e+01,  2.25464463e+00],
           [-1.04009800e+01,  7.24736023e+00],
           [-6.54486942e+00, -1.11015806e+01]], dtype=float32)




```python
tsne_df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x_coord</th>
      <th>y_coord</th>
      <th>plc</th>
      <th>cluster_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>4.013717</td>
      <td>11.993100</td>
      <td>1100고지(휴게소)</td>
      <td>4</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2.841430</td>
      <td>12.233421</td>
      <td>1100고지습지</td>
      <td>4</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-7.784427</td>
      <td>4.030628</td>
      <td>가파도</td>
      <td>6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3.308456</td>
      <td>-8.087944</td>
      <td>감귤박물관</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7.467866</td>
      <td>13.330901</td>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>2</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>344</th>
      <td>-7.563617</td>
      <td>6.470897</td>
      <td>화순금모래해수욕장</td>
      <td>1</td>
    </tr>
    <tr>
      <th>345</th>
      <td>-5.178633</td>
      <td>-16.665094</td>
      <td>화조원</td>
      <td>3</td>
    </tr>
    <tr>
      <th>346</th>
      <td>13.943093</td>
      <td>2.254645</td>
      <td>환상숲 곶자왈공원</td>
      <td>5</td>
    </tr>
    <tr>
      <th>347</th>
      <td>-10.400980</td>
      <td>7.247360</td>
      <td>황우지해안</td>
      <td>1</td>
    </tr>
    <tr>
      <th>348</th>
      <td>-6.544869</td>
      <td>-11.101581</td>
      <td>휴애리 자연생활공원</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
<p>349 rows × 4 columns</p>
</div>




```python
from bokeh.plotting import figure, show, output_notebook
from bokeh.models import HoverTool, ColumnDataSource, value
from bokeh.palettes import brewer

output_notebook()
```



<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1301">Loading BokehJS ...</span>
</div>





```python
# Get the number of colors we'll need for the plot.
colors = brewer["Spectral"][len(tsne_df['cluster_no'].unique())]

# Create a map between factor and color.
colormap = {i: colors[i] for i in tsne_df['cluster_no'].unique()}

# Create a list of colors for each value that we will be looking at.
colors = [colormap[x] for x in tsne_df['cluster_no']]

tsne_df['color'] = colors
```


```python
plot_data = ColumnDataSource(
    data=tsne_df.to_dict(orient='list')
)
```


```python
# Plot 만들기(배경)
from bokeh.plotting import figure, output_file, save
tsne_plot = figure(
    title='RNN_biLSTM',
    plot_width = 900,
    plot_height = 900,
    active_scroll='wheel_zoom',
    output_backend="webgl",
)

```


```python
# 해당 Hover 툴팁 만들기
tsne_plot.add_tools(
    HoverTool(
        tooltips='@plc'
    )
)
```


```python
tsne_plot.circle(
    source=plot_data,
    x='x_coord',
    y='y_coord',
    size=10,
    fill_color='color',
    line_color='color',
)

```




<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.renderers.GlyphRenderer">GlyphRenderer</b>(</div><div style="display: table-cell;">id&nbsp;=&nbsp;'1341', <span id="1344" style="cursor: pointer;">&hellip;)</span></div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data_source&nbsp;=&nbsp;ColumnDataSource(id='1302', ...),</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">glyph&nbsp;=&nbsp;Circle(id='1339', ...),</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">hover_glyph&nbsp;=&nbsp;None,</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks&nbsp;=&nbsp;{},</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks&nbsp;=&nbsp;{},</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">level&nbsp;=&nbsp;'glyph',</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted&nbsp;=&nbsp;False,</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted_glyph&nbsp;=&nbsp;None,</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name&nbsp;=&nbsp;None,</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">nonselection_glyph&nbsp;=&nbsp;Circle(id='1340', ...),</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_glyph&nbsp;=&nbsp;None,</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events&nbsp;=&nbsp;[],</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags&nbsp;=&nbsp;[],</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">view&nbsp;=&nbsp;CDSView(id='1342', ...),</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible&nbsp;=&nbsp;True,</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">x_range_name&nbsp;=&nbsp;'default',</div></div><div class="1343" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">y_range_name&nbsp;=&nbsp;'default')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1344");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1343");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script>





```python
# 각 값들 추가해주기 
tsne_plot.title.text_font_size = value('16pt')
# 짠!
show(tsne_plot)

```








<div class="bk-root" id="dc9a2add-aec8-4ea1-a893-1ee1235e4014" data-root-id="1303"></div>





# Attention_biLSTM


```python
data=np.load('mean_vec_Attention_biLSTM.npy',allow_pickle=True)
```


```python
data = pd.DataFrame(data, columns = ['plc','mean_vec'])
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[[0.5112472, 0.0, 0.0848727, 0.46932766, 1.046...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[[0.06715417, 0.120317906, 0.37350067, 0.03816...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[[0.12702467, 0.68548775, 0.014556497, 0.08690...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[[0.24450178, 0.0, 0.09797165, 1.9341786, 0.04...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[[0.18596867, 0.011492662, 0.6990482, 0.899301...</td>
    </tr>
  </tbody>
</table>
</div>




```python
data.to_csv("어텐션.csv", encoding='utf-8-sig', index=False)
```


```python
len(data)
```




    349




```python
for i in range(len(data)):
    data['mean_vec'][i]=list(data['mean_vec'][i][0])
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.5112472, 0.0, 0.0848727, 0.46932766, 1.0461...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.06715417, 0.120317906, 0.37350067, 0.038166...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.12702467, 0.68548775, 0.014556497, 0.086903...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.24450178, 0.0, 0.09797165, 1.9341786, 0.046...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.18596867, 0.011492662, 0.6990482, 0.8993015...</td>
    </tr>
  </tbody>
</table>
</div>




```python
dat=data['mean_vec'].tolist()
```

# kmeans


```python
kmeans_clustering = KMeans(n_clusters = 7 )
idx = kmeans_clustering.fit_predict(dat)
data['category'] = idx
```


```python
data.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>plc</th>
      <th>mean_vec</th>
      <th>category</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1100고지(휴게소)</td>
      <td>[0.5112472, 0.0, 0.0848727, 0.46932766, 1.0461...</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1100고지습지</td>
      <td>[0.06715417, 0.120317906, 0.37350067, 0.038166...</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>가파도</td>
      <td>[0.12702467, 0.68548775, 0.014556497, 0.086903...</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>감귤박물관</td>
      <td>[0.24450178, 0.0, 0.09797165, 1.9341786, 0.046...</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>[0.18596867, 0.011492662, 0.6990482, 0.8993015...</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div>




```python
X=data['mean_vec'].tolist()
```


```python
len(X)
```




    349



# tsne


```python
from sklearn.manifold import TSNE

y = data['category'].to_list()

import os.path
import pickle

tsne = TSNE(n_components=2,random_state=42)
tsne_points = tsne.fit_transform(X)
tsne_df = pd.DataFrame(tsne_points, index=range(len(X)), columns=['x_coord', 'y_coord'])
tsne_df['plc'] = data['plc'].to_list()
tsne_df['cluster_no'] = y
```


```python
tsne_points
```




    array([[-6.93555212e+00, -1.26626196e+01],
           [-6.58268499e+00, -1.20448284e+01],
           [-3.24049830e+00,  3.55302715e+00],
           [-1.54784908e+01,  7.58772135e+00],
           [ 1.80312691e+01, -3.07476473e+00],
           [-5.49262285e+00, -8.58241367e+00],
           [ 1.56361465e+01,  3.12902403e+00],
           [-1.06653252e+01, -2.40265918e+00],
           [-2.51927805e+00,  8.85233212e+00],
           [ 3.50688457e-01,  2.01411748e+00],
           [ 1.21096504e+00, -2.78076196e+00],
           [ 1.73830891e+00, -2.20946789e+00],
           [ 4.56872702e+00, -1.54976597e+01],
           [ 6.77829647e+00,  9.15326309e+00],
           [-1.54326820e+00,  1.21267738e+01],
           [-1.12995672e+00,  1.25606785e+01],
           [-2.91807103e+00,  2.08354950e+01],
           [-1.23384104e+01, -1.22742710e+01],
           [-1.23479109e+01, -1.23671227e+01],
           [-5.94549847e+00,  1.01924105e+01],
           [ 4.17116642e+00, -1.02845545e+01],
           [ 2.44183683e+00,  1.15153022e-01],
           [ 1.38935938e+01,  3.98630548e+00],
           [-1.00012565e+00, -9.04686260e+00],
           [-1.57393599e+01,  6.88253403e+00],
           [ 6.32433796e+00, -3.45725083e+00],
           [ 1.49008331e+01,  2.12770534e+00],
           [ 8.41972828e+00, -6.03268909e+00],
           [-7.91172326e-01,  1.39210682e+01],
           [-2.54759336e+00, -1.33259020e+01],
           [-1.09543695e+01,  5.03196061e-01],
           [ 3.81848550e+00,  6.88803017e-01],
           [ 1.65536251e+01,  8.16557980e+00],
           [ 1.18663418e+00,  9.33276176e+00],
           [ 4.54894781e+00, -2.73360538e+00],
           [ 1.30763998e+01,  7.52497292e+00],
           [-8.70779991e+00,  4.76983696e-01],
           [ 1.08130713e+01,  4.25142002e+00],
           [-9.27224517e-01, -1.79547429e+00],
           [-3.47770286e+00,  2.09912090e+01],
           [ 9.83233070e+00,  8.67874718e+00],
           [-1.36932440e+01, -2.12615466e+00],
           [ 1.22612343e+01, -8.43166924e+00],
           [-1.30973206e+01,  7.17793763e-01],
           [-2.51441121e+00, -2.38104798e-02],
           [ 1.18360147e+01,  8.64578247e+00],
           [-3.00734568e+00,  2.17991409e+01],
           [-2.83995008e+00,  2.27740479e+01],
           [ 5.43277740e-01, -2.62179780e+00],
           [-1.40611196e+00, -1.02094297e+01],
           [-2.27530646e+00, -9.77500534e+00],
           [ 1.45348921e+01,  8.10690403e+00],
           [ 4.58178043e+00,  4.25072765e+00],
           [-3.02539182e+00,  1.92441654e+00],
           [-1.45076828e+01,  1.60348666e+00],
           [ 8.32490063e+00,  9.07077217e+00],
           [-1.23348236e+00, -8.57214165e+00],
           [-2.24521250e-01,  5.37674284e+00],
           [ 8.95684338e+00, -3.69611192e+00],
           [-9.10030842e+00, -7.75726604e+00],
           [-9.15569592e+00, -7.86791229e+00],
           [-4.35442114e+00, -1.48696308e+01],
           [ 1.00580463e+01, -3.00080872e+00],
           [-1.07167244e+01, -4.38622189e+00],
           [ 1.32741308e+01,  9.98200417e+00],
           [-1.88002264e+00, -1.16413698e+01],
           [-2.95677328e+00, -1.68059597e+01],
           [ 8.27502060e+00,  7.32785130e+00],
           [-1.03841534e+01,  2.79269600e+00],
           [-1.06555634e+01,  2.48766780e+00],
           [ 9.60568619e+00,  8.58978081e+00],
           [-3.69326758e+00,  2.55661488e+00],
           [-4.12451506e+00,  2.45654774e+00],
           [-9.21685505e+00, -1.05021639e+01],
           [ 1.31560736e+01,  1.18071556e+01],
           [-1.38356314e+01, -1.22945662e+01],
           [ 1.45684910e+01, -4.44904280e+00],
           [ 8.39549351e+00, -1.45837748e+00],
           [ 1.41717076e-01,  3.91219854e+00],
           [-2.76048040e+00,  6.64444876e+00],
           [-1.32796412e+01,  6.00178146e+00],
           [ 5.08980229e-02, -1.42764397e+01],
           [ 1.00032365e+00, -1.58190556e+01],
           [ 1.39380198e+01,  3.66351581e+00],
           [-5.17819309e+00, -1.03823786e+01],
           [-5.29036808e+00, -1.13407831e+01],
           [ 1.51840124e+01, -9.49743837e-02],
           [ 4.54645157e+00,  4.12880945e+00],
           [ 9.99941921e+00,  2.62286663e+00],
           [ 1.87700634e+01,  9.89101028e+00],
           [-8.29417229e+00, -1.43615618e+01],
           [-3.86346769e+00, -1.36067743e+01],
           [-1.97268283e+00,  2.09854698e+01],
           [-6.24165630e+00,  2.24116778e+00],
           [-1.79835963e+00,  6.47228098e+00],
           [ 4.58384544e-01, -1.12560320e+00],
           [ 5.38885880e+00,  3.76412201e+00],
           [-1.20692749e+01,  2.54988599e+00],
           [ 1.69832230e+01,  6.33027554e+00],
           [ 1.05534143e+01,  8.81264627e-01],
           [ 1.00272584e+00, -1.50689230e+01],
           [ 1.17863250e+00, -1.52307167e+01],
           [-2.48730397e+00,  4.31703711e+00],
           [ 4.30596256e+00, -1.40517511e+01],
           [-1.50522125e+00,  9.62317753e+00],
           [-4.25946474e+00,  2.06875553e+01],
           [-1.86387375e-01,  4.30149436e-01],
           [-8.09012353e-01,  8.74887034e-02],
           [ 1.46174371e+00, -1.00005608e+01],
           [ 1.46594691e+00, -1.00051155e+01],
           [-6.73229074e+00, -1.43377447e+01],
           [ 2.04453707e+00, -1.62013645e+01],
           [-6.85678959e+00,  9.20332909e-01],
           [ 2.82979655e+00,  1.43930376e+00],
           [-2.90596008e+00, -1.69387710e+00],
           [-2.38589048e+00, -1.51839876e+00],
           [-9.51485276e-01, -4.21994638e+00],
           [-7.39624643e+00,  3.40917110e+00],
           [-4.77159977e+00,  4.22950797e-02],
           [ 1.24399033e+01,  4.25758600e+00],
           [ 5.68974316e-01,  1.09224129e+01],
           [-1.06090651e+01, -8.03190649e-01],
           [-3.43681669e+00, -1.85957642e+01],
           [-2.15143967e+00,  3.40134311e+00],
           [-4.53548956e+00, -2.75897264e+00],
           [ 1.13360891e+01,  2.03159881e+00],
           [-3.36560965e-01,  1.81895947e+00],
           [ 7.95650768e+00,  9.06268501e+00],
           [-9.03070450e-01,  4.79158163e+00],
           [ 3.70035648e+00, -1.36503124e+01],
           [ 4.03574610e+00,  1.57420559e+01],
           [ 1.82582321e+01, -4.02153343e-01],
           [ 3.89342284e+00, -1.51743584e+01],
           [-9.10243130e+00, -3.69540477e+00],
           [ 1.41734108e-01,  5.58363056e+00],
           [-3.98687625e+00,  1.10635459e+00],
           [-1.21404886e+00,  1.61027794e+01],
           [ 1.17435579e+01,  6.75969744e+00],
           [ 4.79103613e+00,  1.90691745e+00],
           [-2.42773461e+00,  4.44365114e-01],
           [-2.59483814e+00,  2.19655876e+01],
           [-8.96247864e+00, -1.54671297e+01],
           [-4.59667301e+00,  8.17928696e+00],
           [ 7.52584314e+00, -9.11327362e+00],
           [-5.31230402e+00,  7.52594376e+00],
           [-1.16242695e+01,  4.31998014e+00],
           [-7.27422190e+00,  5.42893982e+00],
           [ 1.26107855e+01,  7.58977461e+00],
           [-9.09674358e+00,  1.92567205e+00],
           [-1.41192639e+00,  7.03356361e+00],
           [-1.51432505e+01,  4.56077480e+00],
           [ 4.13355732e+00,  1.01164112e+01],
           [ 3.83649492e+00,  1.01498337e+01],
           [ 1.05317211e+01,  1.17922459e+01],
           [-8.29603577e+00, -5.99337530e+00],
           [-4.82418013e+00, -3.69217587e+00],
           [ 1.29748039e+01,  1.29636774e+01],
           [ 7.81906319e+00,  7.39022398e+00],
           [-1.54556692e+00, -9.05376971e-01],
           [-1.20621943e+00,  9.30692196e+00],
           [-3.57387453e-01,  9.80721569e+00],
           [-1.82934999e+00, -2.52701712e+00],
           [-1.20090830e+00, -3.01427603e+00],
           [ 1.87940044e+01,  1.00953331e+01],
           [ 1.02703714e+00,  6.81943560e+00],
           [-3.43348432e+00, -5.57242060e+00],
           [-4.30651140e+00,  9.39451218e+00],
           [ 3.36297846e+00,  3.07503629e+00],
           [-5.51243484e-01,  3.35098004e+00],
           [-2.06826115e+00,  8.63362134e-01],
           [ 9.42327785e+00,  7.06364918e+00],
           [-1.42987862e+01, -9.27083302e+00],
           [-3.12372160e+00, -1.71490536e+01],
           [-1.49317169e+01,  6.65982819e+00],
           [ 1.67165890e+01,  5.58992624e+00],
           [-1.47674060e+00, -1.26488867e+01],
           [-1.03409290e+01,  4.13888836e+00],
           [-7.67250109e+00,  1.35105877e+01],
           [-7.17510796e+00, -7.79845428e+00],
           [-6.75803280e+00, -9.91831303e+00],
           [-1.56687725e+00,  2.21411686e+01],
           [ 2.45752001e+00,  9.38698864e+00],
           [ 5.68535900e+00, -3.38053763e-01],
           [ 4.98807764e+00, -4.80970502e-01],
           [-1.19989624e+01, -1.11454210e+01],
           [-7.96819735e+00, -1.45231256e+01],
           [-7.62476444e+00,  5.77029467e+00],
           [-8.32592773e+00, -5.87901878e+00],
           [-8.79337025e+00,  9.41102600e+00],
           [-7.35415411e+00, -8.65155220e-01],
           [-1.45115633e+01,  2.59860069e-01],
           [-1.09048777e+01, -1.56856565e+01],
           [-2.08317900e+00, -1.42358713e+01],
           [-1.25006018e+01,  2.26548600e+00],
           [-1.12437439e+01,  5.63776684e+00],
           [ 3.89303899e+00,  5.94378233e+00],
           [ 6.28623676e+00, -6.19459391e+00],
           [-8.56875539e-01, -1.64469242e+01],
           [ 1.68555820e+00,  1.85571492e+00],
           [-3.60908103e+00, -4.37335634e+00],
           [ 1.18861103e+00,  8.66644740e-01],
           [-9.89100397e-01, -4.18976164e+00],
           [-5.21556759e+00, -4.60698700e+00],
           [-3.05049944e+00,  4.60774660e+00],
           [-4.00910425e+00,  4.55734444e+00],
           [-5.02340698e+00,  4.20556593e+00],
           [-8.69298160e-01,  7.43583298e+00],
           [ 4.09528875e+00,  1.56772537e+01],
           [-8.60219669e+00, -6.77048159e+00],
           [-1.32088079e+01, -7.92766094e-01],
           [-5.78217745e-01,  1.04410810e+01],
           [ 2.64977789e+00,  1.10713081e+01],
           [-1.40953798e+01, -4.82145739e+00],
           [-1.68710232e+00,  5.23886347e+00],
           [-6.86186934e+00, -1.56995916e+01],
           [-1.14814253e+01,  5.23518324e+00],
           [-7.15287828e+00, -1.13070936e+01],
           [ 1.92289982e+01,  6.90796185e+00],
           [ 1.93664188e+01,  6.64676714e+00],
           [ 1.91132183e+01,  6.29954433e+00],
           [ 4.26217175e+00,  7.19091988e+00],
           [ 3.75400186e+00,  7.96051264e+00],
           [ 9.15251541e+00, -9.37326252e-03],
           [ 8.53417397e+00, -8.48507941e-01],
           [-1.58905888e+01,  5.34960665e-02],
           [-3.59958673e+00, -7.02690125e+00],
           [-1.61382465e+01,  1.14837894e-02],
           [-1.57959354e+00,  2.03868484e+01],
           [ 9.42965984e+00,  4.14724588e+00],
           [-3.80156326e+00, -1.34888620e+01],
           [-6.78856134e+00, -5.19383192e+00],
           [-2.67355919e+00,  2.04159107e+01],
           [ 1.38017340e+01,  1.01002312e+00],
           [-8.96125507e+00, -1.05236375e+00],
           [-5.91037273e+00, -2.06125140e+00],
           [ 1.45902576e+01, -4.49351454e+00],
           [ 1.14647017e+01,  6.28764725e+00],
           [ 1.20679522e+01, -3.69897699e+00],
           [-1.08689594e+01, -1.94567549e+00],
           [ 1.79272518e+01,  5.17312956e+00],
           [ 1.11079607e+01,  6.92974389e-01],
           [-1.40806255e+01, -4.81872225e+00],
           [ 1.56938477e+01, -6.60507262e-01],
           [-3.09928298e+00, -6.86398840e+00],
           [ 8.70728302e+00,  6.65220928e+00],
           [ 1.37259464e+01,  5.26770020e+00],
           [ 1.42305222e+01,  7.97089386e+00],
           [ 1.26229200e+01, -8.97018850e-01],
           [ 1.80949039e+01, -5.78983903e-01],
           [ 1.81537209e+01, -2.61320829e+00],
           [ 1.46848040e+01, -4.67867523e-01],
           [ 2.31570411e+00, -5.65212870e+00],
           [-1.63226795e+01, -3.24085569e+00],
           [ 1.83571517e+00, -6.51590443e+00],
           [ 3.78307414e+00, -4.52073240e+00],
           [ 1.93433595e+00, -5.88026571e+00],
           [-6.34201705e-01, -9.04752135e-01],
           [ 2.55961657e+00, -4.41376877e+00],
           [ 1.32324767e+00, -5.84116936e+00],
           [ 3.20161533e+00, -4.66093922e+00],
           [ 3.63151479e+00, -6.44108915e+00],
           [ 3.00230646e+00, -7.09396029e+00],
           [ 2.86282325e+00, -6.26266384e+00],
           [ 1.97060454e+00, -5.48263741e+00],
           [ 3.65439224e+00, -3.96708250e+00],
           [ 1.71158791e+01,  1.72113073e+00],
           [ 1.68995304e+01,  1.70387745e+00],
           [ 4.08043909e+00, -1.36844015e+01],
           [ 1.54118280e+01,  1.10316868e+01],
           [ 1.44277372e+01,  5.44279623e+00],
           [-1.18174257e+01,  7.51430798e+00],
           [ 1.64017563e+01,  5.18815804e+00],
           [ 1.56681738e+01,  5.04915059e-01],
           [-5.60870123e+00,  1.00187108e-01],
           [ 1.40755730e+01,  2.07708454e+00],
           [-7.93389845e+00, -2.84554720e+00],
           [ 1.61239834e+01,  5.23211813e+00],
           [-7.89003658e+00,  6.18983555e+00],
           [ 1.02244222e+00,  2.83134556e+00],
           [ 2.93596935e+00, -1.17557430e+00],
           [-1.85056000e+01, -6.07587576e+00],
           [-1.38839483e+00,  2.52844787e+00],
           [-1.85127201e+01, -6.07048464e+00],
           [-1.69120598e+00, -5.17194605e+00],
           [ 5.35447693e+00, -8.38337994e+00],
           [-5.09453535e+00, -1.32368004e+00],
           [-3.88415718e+00,  1.15560560e+01],
           [-5.53471327e+00,  2.07386398e+00],
           [-2.01325655e+00, -1.07510376e+01],
           [-3.34459209e+00,  1.95554142e+01],
           [-1.90773535e+00,  4.23674870e+00],
           [-9.34450340e+00, -1.29184885e+01],
           [-8.27954769e+00, -1.27658072e+01],
           [-7.37178421e+00, -5.26146221e+00],
           [-6.58832407e+00, -4.93001175e+00],
           [ 7.95463943e+00,  2.77263379e+00],
           [-4.43558884e+00, -9.10486603e+00],
           [-1.20939999e+01,  8.34458923e+00],
           [-1.46302290e+01,  6.71914244e+00],
           [ 6.51993608e+00,  1.52567399e+00],
           [-2.98152590e+00,  5.17726755e+00],
           [-1.20275736e+01, -4.24446535e+00],
           [ 1.27490816e+01, -2.60830688e+00],
           [-1.55595481e+00, -1.60145359e+01],
           [-4.37851000e+00, -9.17849660e-01],
           [-5.75303555e+00, -1.01991105e+00],
           [ 2.16975355e+00,  8.32850838e+00],
           [-3.01510882e+00,  2.05623512e+01],
           [ 1.36746378e+01,  4.76612709e-02],
           [ 1.37089796e+01, -4.78441656e-01],
           [ 1.74113166e+00,  1.27405958e+01],
           [ 1.06278694e+00,  4.17995977e+00],
           [-7.63640070e+00,  1.34829245e+01],
           [ 6.31041718e+00, -3.46147370e+00],
           [ 5.37253237e+00,  5.36201239e+00],
           [-2.87841630e+00, -2.84767365e+00],
           [-6.81201267e+00, -1.03201735e+00],
           [ 2.51826096e+00,  4.48198080e+00],
           [ 2.34137774e+00,  6.66508865e+00],
           [ 2.86756217e-01,  1.22880583e+01],
           [ 8.72006536e-01,  8.73276424e+00],
           [ 5.87429571e+00, -2.11807862e-01],
           [-1.41817675e+01,  5.96802855e+00],
           [-8.39374447e+00, -1.60172386e+01],
           [-8.54998302e+00, -1.63599968e+01],
           [-8.48040104e+00, -1.63382549e+01],
           [ 5.24661112e+00, -1.44452734e+01],
           [ 4.90471601e+00, -1.28779497e+01],
           [ 9.64160061e+00,  8.50581884e-01],
           [-4.25267744e+00,  6.06024361e+00],
           [ 3.31285620e+00, -7.42790878e-01],
           [-1.55554831e+00,  1.70704975e+01],
           [-1.11685884e+00,  1.54201775e+01],
           [-1.06063833e+01, -3.55642867e+00],
           [ 1.90759678e+01, -1.75191832e+00],
           [ 1.54790962e+00,  2.58579302e+00],
           [ 4.65074539e+00,  1.51210995e+01],
           [ 1.40735941e+01, -1.54000223e+00],
           [-1.29038038e+01, -7.98480988e+00],
           [-3.69330049e+00,  1.40821209e+01],
           [-9.18851078e-01,  1.41130533e+01],
           [-1.29641616e+00,  3.56582940e-01],
           [ 2.23305559e+00,  9.09317508e-02],
           [ 1.10316982e+01,  2.49674869e+00],
           [ 8.65646780e-01,  7.87228394e+00],
           [ 9.39650726e+00,  1.97791982e+00],
           [ 4.18780947e+00, -1.54121304e+01],
           [-2.65812826e+00,  1.02818060e+01],
           [ 1.10530624e+01, -7.41228342e+00]], dtype=float32)




```python
tsne_df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x_coord</th>
      <th>y_coord</th>
      <th>plc</th>
      <th>cluster_no</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-6.935552</td>
      <td>-12.662620</td>
      <td>1100고지(휴게소)</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-6.582685</td>
      <td>-12.044828</td>
      <td>1100고지습지</td>
      <td>5</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-3.240498</td>
      <td>3.553027</td>
      <td>가파도</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-15.478491</td>
      <td>7.587721</td>
      <td>감귤박물관</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>18.031269</td>
      <td>-3.074765</td>
      <td>거문오름(UNESCO 세계자연유산)</td>
      <td>5</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>344</th>
      <td>0.865647</td>
      <td>7.872284</td>
      <td>화순금모래해수욕장</td>
      <td>6</td>
    </tr>
    <tr>
      <th>345</th>
      <td>9.396507</td>
      <td>1.977920</td>
      <td>화조원</td>
      <td>4</td>
    </tr>
    <tr>
      <th>346</th>
      <td>4.187809</td>
      <td>-15.412130</td>
      <td>환상숲 곶자왈공원</td>
      <td>1</td>
    </tr>
    <tr>
      <th>347</th>
      <td>-2.658128</td>
      <td>10.281806</td>
      <td>황우지해안</td>
      <td>6</td>
    </tr>
    <tr>
      <th>348</th>
      <td>11.053062</td>
      <td>-7.412283</td>
      <td>휴애리 자연생활공원</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>349 rows × 4 columns</p>
</div>




```python
from bokeh.plotting import figure, show, output_notebook
from bokeh.models import HoverTool, ColumnDataSource, value
from bokeh.palettes import brewer

output_notebook()
```



<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1417">Loading BokehJS ...</span>
</div>





```python
# Get the number of colors we'll need for the plot.
colors = brewer["Spectral"][len(tsne_df['cluster_no'].unique())]

# Create a map between factor and color.
colormap = {i: colors[i] for i in tsne_df['cluster_no'].unique()}

# Create a list of colors for each value that we will be looking at.
colors = [colormap[x] for x in tsne_df['cluster_no']]

tsne_df['color'] = colors
```


```python
plot_data = ColumnDataSource(
    data=tsne_df.to_dict(orient='list')
)
```


```python
# Plot 만들기(배경)
tsne_plot = figure(
    title='ATTENTION_biLSTM',
    plot_width = 900,
    plot_height = 900,
    active_scroll='wheel_zoom',
    output_backend="webgl",
)
```


```python
# 해당 Hover 툴팁 만들기
tsne_plot.add_tools(
    HoverTool(
        tooltips='@plc'
    )
)
```


```python
tsne_plot.circle(
    source=plot_data,
    x='x_coord',
    y='y_coord',
    size=10,
    fill_color='color',
    line_color='color',
)
```




<div style="display: table;"><div style="display: table-row;"><div style="display: table-cell;"><b title="bokeh.models.renderers.GlyphRenderer">GlyphRenderer</b>(</div><div style="display: table-cell;">id&nbsp;=&nbsp;'1457', <span id="1460" style="cursor: pointer;">&hellip;)</span></div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">data_source&nbsp;=&nbsp;ColumnDataSource(id='1418', ...),</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">glyph&nbsp;=&nbsp;Circle(id='1455', ...),</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">hover_glyph&nbsp;=&nbsp;None,</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_event_callbacks&nbsp;=&nbsp;{},</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">js_property_callbacks&nbsp;=&nbsp;{},</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">level&nbsp;=&nbsp;'glyph',</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted&nbsp;=&nbsp;False,</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">muted_glyph&nbsp;=&nbsp;None,</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">name&nbsp;=&nbsp;None,</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">nonselection_glyph&nbsp;=&nbsp;Circle(id='1456', ...),</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">selection_glyph&nbsp;=&nbsp;None,</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">subscribed_events&nbsp;=&nbsp;[],</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">tags&nbsp;=&nbsp;[],</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">view&nbsp;=&nbsp;CDSView(id='1458', ...),</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">visible&nbsp;=&nbsp;True,</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">x_range_name&nbsp;=&nbsp;'default',</div></div><div class="1459" style="display: none;"><div style="display: table-cell;"></div><div style="display: table-cell;">y_range_name&nbsp;=&nbsp;'default')</div></div></div>
<script>
(function() {
  var expanded = false;
  var ellipsis = document.getElementById("1460");
  ellipsis.addEventListener("click", function() {
    var rows = document.getElementsByClassName("1459");
    for (var i = 0; i < rows.length; i++) {
      var el = rows[i];
      el.style.display = expanded ? "none" : "table-row";
    }
    ellipsis.innerHTML = expanded ? "&hellip;)" : "&lsaquo;&lsaquo;&lsaquo;";
    expanded = !expanded;
  });
})();
</script>





```python
# 각 값들 추가해주기 
tsne_plot.title.text_font_size = value('16pt')
# 짠!
show(tsne_plot)
```








<div class="bk-root" id="739322d2-ba0f-4b93-b99b-d563295865cc" data-root-id="1419"></div>






```python

```
